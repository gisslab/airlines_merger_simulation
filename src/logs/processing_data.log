----------------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  /Users/gisellelab/Work/airlines_merger_simulation/src/logs/processing_data.log
  log type:  text
 opened on:   8 Oct 2025, 00:35:32

. 
. // ---------------------- PARAMETERS -------------------------------------------
. global YEARS   "2005/2019"

. global QUARTERS "1 2 3 4"

. global TYPE     "Market"   // DB1B “Market”

. 
. 
. di as yellow "--------------------------------------------------------------------------------------------------"
--------------------------------------------------------------------------------------------------

. di as yellow "----------------------------------- Running preprocessing_data.do --------------------------------"
----------------------------------- Running preprocessing_data.do --------------------------------

. di as yellow "--------------------------------------------------------------------------------------------------"
--------------------------------------------------------------------------------------------------

. 
. // ---------------------- LOAD AUXILIARY TABLES --------------------------------
. di as yellow "------------------------------------ Loading auxiliary tables ------------------------------------"
------------------------------------ Loading auxiliary tables ------------------------------------

. 
. // * City market lookup
. import delimited using "${PROC_OTHER}city_market_lookup.csv", varnames(1) clear stringcols(_all)
(encoding automatically selected: ISO-8859-1)
(2 vars, 5,987 obs)

. tempfile cities

. save `cities'
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000001 saved as .dta format

. 
. // * Vacations (city-level flags) (only in the U.S.)
. import delimited using "${PROC_OTHER}vacations.csv", varnames(1) clear stringcols(_all)
(encoding automatically selected: ISO-8859-1)
(2 vars, 243 obs)

. rename origin_cities description

. destring vacation_spot, replace force
vacation_spot: all characters numeric; replaced as byte

. tempfile vacations

. save `vacations'
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000002 saved as .dta format

. 
. // * City lookup + vacations
. use `cities', clear

. merge 1:1 description using `vacations', nogenerate

    Result                      Number of obs
    -----------------------------------------
    Not matched                         5,816
        from master                     5,780  
        from using                         36  

    Matched                               207  
    -----------------------------------------

. keep code vacation_spot

. 
. // # make int vacation_spot if float
. replace vacation_spot = 0 if vacation_spot==.
(5,780 real changes made)

. // code to long for merger
. destring code, replace
code: all characters numeric; replaced as long
(36 missing values generated)

. // Remove duplicates to ensure unique merge key
. duplicates drop code, force

Duplicates in terms of code

(35 observations deleted)

. gen long destcitymarketid = code  // for origin merge
(1 missing value generated)

. drop code

. tempfile cities_vac

. save `cities_vac'
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000003 saved as .dta format

. 
. // * Population by airport-year
. import delimited using "${PROC_OTHER}population.csv", varnames(1) clear
(encoding automatically selected: ISO-8859-1)
(4 vars, 27,480 obs)

. // expected cols: airport, msa, year, population
. keep airport year population

. rename airport airport_id

. tempfile pops

. save `pops'
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000004 saved as .dta format

. 
. // * Slot-controlled airports
. import delimited using "${PROC_OTHER}slot_controlled.csv", varnames(1) clear
(encoding automatically selected: ISO-8859-2)
(2 vars, 6,430 obs)

. // expected cols: airport, slot_controlled
. // ensure lowercase column names
. foreach v of varlist * {
  2.     local newname = lower("`v'")
  3.     if "`v'" != "`newname'" {
  4.         rename `v' `newname'
  5.     }
  6. }

. rename airport airport_id

. destring airport_id, replace
airport_id already numeric; no replace

. destring slot_controlled, replace
slot_controlled already numeric; no replace

. tempfile slots

. save `slots'
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000005 saved as .dta format

. 
. // * T_MASTER_CORD (airport metadata; filter to CONUS)
. 
. import delimited using "${PROC_OTHER}t_master_cord.csv", varnames(1) clear
(encoding automatically selected: ISO-8859-1)
(28 vars, 18,944 obs)

. 
. // ensure lowercase column names
. foreach v of varlist * {
  2.     local newname = lower("`v'")
  3.     if "`v'" != "`newname'" {
  4.         rename `v' `newname'
  5.     }
  6. }

. keep if airport_country_code_iso == "US" & !inlist(airport_state_code,"PR","VI","TT","HI","AK")
(13,182 observations deleted)

. 
. keep airport_id display_airport_name display_airport_city_name_full

. duplicates drop airport_id, force

Duplicates in terms of airport_id

(3,596 observations deleted)

. rename airport_id originairportid  // for origin merge

. rename display_airport_name orig_airport_name

. rename display_airport_city_name_full orig_city

. tempfile conus_origin

. save `conus_origin'
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000006 saved as .dta format

. 
. // Create separate copy for destination merge
. rename originairportid destairportid

. rename orig_airport_name dest_airport_name

. rename orig_city dest_city

. tempfile conus_dest

. save `conus_dest'
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000007 saved as .dta format

. 
. // * Lookup & Hub (wide) -> long(Code, carrier, hub)
. import delimited using "${PROC_OTHER}lookup_and_hub_r.csv", varnames(1) clear stringcols(_all)
(encoding automatically selected: ISO-8859-9)
(134 vars, 6,429 obs)

. 
. // ensure lowercase column names
. foreach v of varlist * {
  2.     local newname = lower("`v'")
  3.     if "`v'" != "`newname'" {
  4.         rename `v' `newname'
  5.     }
  6. }

. // expected cols: code, description, airport, then 100+ carrier columns (AA, DL, WN, NK, UA, …)
. drop description airport

. // Prefix all non-code columns with "hub_"
. unab allvars : *

. local rest : list allvars - code 

. 
. 
. foreach v of local rest {
  2.     capture confirm variable `v'
  3.     if !_rc rename `v' hub_`v'
  4.     qui destring hub_`v', replace force
  5. }

. rename hub_code airport_code

. 
. // reshape to long on stub hub_
. qui reshape long hub_, i(airport_code) j(carrier) string

. rename airport_code airport_id

. rename hub_ hub

. replace hub = 0 if missing(hub)
(0 real changes made)

. // Convert carrier codes back to uppercase to match DB1B data
. replace carrier = upper(carrier)
(842,199 real changes made)

. tempfile hubs_long

. save `hubs_long'
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000008 saved as .dta format

. 
. // CPI (already base=2008 index) — if yours is year,index
. // If the file has columns like year,index (2008=100), we’ll read and use as deflator map.
. import delimited using "${RAW_OTHER}cpi_index.csv", varnames(1) clear
(encoding automatically selected: ISO-8859-1)
(2 vars, 26 obs)

. // Expect columns: year,value  (value = 100 in 2008)
. keep year value

. rename value deflator_index

. tempfile cpi

. save `cpi'
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000009 saved as .dta format

. 
. // ---------------------- INIT OUTPUT ------------------------------------------
. capture confirm file "${OUT_FILE}"

. local appendflag =  0 // no! _rc==0  // if the file exists, we’ll append

. 
. // ---------------------- LOOP OVER YEARS/QUARTERS -----------------------------
. di as yellow "------------------------------------ Processing DB1B Market data ------------------------------------"
------------------------------------ Processing DB1B Market data ------------------------------------

.     forvalues Y = $YEARS {
  2.         // grab the year’s CPI deflator (index with 2008=100)
.         use `cpi', clear
  3.         keep if year==`Y'
  4.         qui summarize deflator_index
  5.         local DEF = r(mean)  // year-level deflator index
  6. 
.         foreach Q in $QUARTERS {
  7.             di as yellow "--------------------------------- Processing `Y' Q`Q' --------------------------------------"
  8. 
.             // ---------------- Load one quarter market CSV -------------------
.             local fname = "db1b_market_`Y'q`Q'"
  9.             import delimited using "${PROC_DB1B}`fname'.csv", varnames(1) clear
 10.             
.             // If the 42nd var is junk "V" in the R flow, mirror that:
.             capture ds, has(varnum 42)
 11.             if !_rc {
 12.                 local v42 `r(varlist)'
 13.                 capture confirm variable `v42'
 14.                 if !_rc rename `v42' V
 15.             }
 16. 
.             // ---------------- Recreate key derived fields -------------------
.             // Real fare using CPI index (2008=100)
.             // If the CPI index is 100 in 2008, deflate by DEF/100:
.             gen double mktfare_real = mktfare / (`DEF'/100)
 17. 
.             // Keep "good" tickets, fare band, and CONUS airports
.             keep if tkcarrierchange==0
 18.             keep if mktfare_real>=25 & mktfare_real<=2500
 19. 
.             // Limit to CONUS origin/dest
.             tempfile current
 20.             save `current'
 21. 
.             use `current', clear
 22.             di as yellow "    ---------  Filtering CONUS airports ---------"
 23. 
.             merge m:1 originairportid using `conus_origin', keep(match master) nogenerate
 24. 
.             merge m:1 destairportid using `conus_dest', keep(match master) nogenerate
 25.             
.             // Market passengers per O-D (quarter)
.             bysort origincitymarketid destcitymarketid: egen double market_passengers = total(passengers)
 26.             // Keep markets >= 20 pax/day on average, scaled for 10% sample: 20*365/(4*10)
.             keep if market_passengers >= 20*365/(4*10)
 27. 
.             // Core variables for merging/aggregation
.             gen long   origin      = origincitymarketid
 28.             gen long   destination = destcitymarketid
 29.             gen str2   carrier     = tkcarrier
 30.             gen byte   nonstop     = (mktcoupons==1)
 31. 
.             // ---------------- Merge slot_controlled ------------------------
.             di as yellow "    ---------  Filtering slot-controlled airports ---------"
 32. 
.             gen airport_id = originairportid
 33.             merge m:1 airport_id using `slots', keep(match master) nogenerate
 34.             rename slot_controlled origin_slot_controlled
 35.             replace origin_slot_controlled = 0 if missing(origin_slot_controlled)
 36. 
.             replace airport_id = destairportid
 37.             merge m:1 airport_id using `slots', keep(match master) nogenerate
 38.             rename slot_controlled destination_slot_controlled
 39.             replace destination_slot_controlled = 0 if missing(destination_slot_controlled)
 40. 
.             tab origin_slot_controlled destination_slot_controlled // checking not all zeros
 41.             drop airport_id
 42. 
.             // ---------------- Merge destination vacation flag ---------------
.             di as yellow "    ---------  Merging destination vacation flags ---------"
 43.             // Cities table keyed by Code (city market id) and vacation_spot
.             // cities_vac has: Code, vacation_spot -> now destcitymarketid
.             merge m:1 destcitymarketid using `cities_vac', ///
>                 keep(match master) nogenerate
 44.             rename vacation_spot destination_vacation
 45.             replace destination_vacation = 0 if missing(destination_vacation)
 46. 
.             // ---------------- Merge populations by airport-year -------------
.             di as yellow "    ---------  Merging airport populations ---------"
 47.             gen airport_id = originairportid
 48.             merge m:1 airport_id year using `pops', ///
>                 keep(match master) nogenerate
 49.             rename population origin_pop
 50.             replace origin_pop = . if origin_pop<=0
 51. 
.             replace airport_id = destairportid
 52.             merge m:1 airport_id year using `pops', ///
>                 keep(match master) nogenerate
 53.             rename population dest_pop
 54.             replace dest_pop = . if dest_pop<=0
 55. 
.             drop airport_id
 56.             // drop origin_pop dest_pop // not sure if later needed
. 
.             // ---------------- Merge hub indicators (origin/dest) ------------
.             di as yellow "    ---------  Merging hub indicators ---------"
 57.             // hubs_long: Code, carrier, hub
.             // For airports we need Code==AirportID (lookup_and_hub_r used airport codes in "Code")
.             // For origin:
. 
.             gen airport_id = originairportid
 58.             merge m:1 airport_id carrier using `hubs_long', keep(match master) nogenerate
 59.             rename hub origin_hub
 60.             replace origin_hub = 0 if missing(origin_hub)
 61. 
.             replace airport_id = destairportid
 62.             merge m:1 airport_id carrier using `hubs_long', keep(match master) nogenerate
 63.             rename hub destination_hub
 64.             replace destination_hub = 0 if missing(destination_hub)
 65.             drop airport_id
 66. 
.             tab origin_hub destination_hub // checking not all zeros
 67. 
.             // ---------------- Aggregate to (O-D-carrier-quarter) ------------
.             di as yellow "    ---------  Aggregating to (O-D-carrier-quarter) ---------"
 68.             
.             // First calculate passenger-weighted averages for distance and fare variables
.             gen double weighted_distance = mktdistance * passengers
 69.             gen double weighted_nonstop_miles = nonstopmiles * passengers
 70.             gen double weighted_fare = mktfare_real * passengers
 71.             
.             // Save string variables to merge back later
.             preserve 
 72.                 keep origin destination carrier year quarter orig_city orig_airport_name dest_city dest_airport_name
 73.                 duplicates drop origin destination carrier year quarter, force
 74.                 tempfile string_vars
 75.                 save `string_vars' 
 76.             restore
 77. 
.             // Collapse the numeric variables origin_pop dest_pop
.             collapse ///
>             (sum)   total_passengers = passengers ///
>                     weighted_distance weighted_nonstop_miles weighted_fare ///
>             (mean)  destination_vacation ///
>                     origin_hub destination_hub ///
>                     origin_pop dest_pop ///
>                     origin_slot_controlled destination_slot_controlled ///
>                     share_nonstop = nonstop, ///
>             by(origin destination carrier year quarter)
 78. 
.             // Merge the string variables back
.             merge 1:1 origin destination carrier year quarter using `string_vars', nogenerate
 79.             
.             // Calculate final weighted averages
.             gen double average_distance = weighted_distance / total_passengers
 80.             gen double average_nonstop_miles = weighted_nonstop_miles / total_passengers
 81.             gen double average_fare = weighted_fare / total_passengers
 82.             gen double average_extra_miles = average_distance - average_nonstop_miles
 83. 
.             sum origin_hub destination_hub origin_slot_controlled destination_slot_controlled // checking not all zeros
 84.             
.             // Clean up temporary variables
.             drop weighted_distance weighted_nonstop_miles weighted_fare
 85. 
.             di as yellow "               Data collapsed to (O-D-carrier-quarter) level successfully, obs: " _N 
 86. 
.             di as yellow "    ---------  Creating identifiers ---------"
 87.             // ---------------- Identifiers and carrier types -----------------
.             // Use more efficient string creation to avoid "expression too long" error
.             tostring origin, gen(origin_str)
 88.             tostring destination, gen(dest_str)
 89.             gen str11 market_code = origin_str + "-" + dest_str
 90. 
.             gen market_name = orig_airport_name + " - " + dest_airport_name
 91.             gen str100 market_airport_city = orig_airport_name + ", " + orig_city + " - " + dest_airport_name + ", " + 
> dest_city
 92. 
.             drop orig_airport_name dest_airport_name orig_city dest_city
 93. 
.             tostring year, gen(year_str)
 94.             tostring quarter, gen(quarter_str)  
 95.             gen str25 time = year_str + "-" + quarter_str
 96.             drop year_str quarter_str origin_str dest_str
 97. 
.             di as yellow "    ---------  Creating carrier flags ---------"
 98. 
.             do "src/carrier_flags.do"
 99. 
.             di as yellow "    ---------  Creating rival stats ---------"
100.             // * Create presence and num_markets variables first (needed for rival calculations)
.             
.             // Calculate number of fringe firms (non-major carriers) per market
.             // Assuming major_carrier_flag is created in carrier_flags.do
.             gen fringe = 1 - major
101.             bysort origin destination year quarter: egen fringe_carriers = total(fringe)
102.             
.             // Presence = carrier's share of passengers at ORIGIN in that year/quarter (across all destinations)
.             // First calculate total passengers by origin-carrier-year-quarter
.             bysort origin carrier year quarter: egen origin_carrier_pax = total(total_passengers)
103.             // Then calculate total passengers by origin-year-quarter (all carriers)
.             bysort origin year quarter: egen origin_total_pax = total(total_passengers)
104.             // Presence is the share
.             gen presence = origin_carrier_pax / origin_total_pax
105.             replace presence = 0 if missing(presence)
106.             
.             // num_markets = number of distinct destinations this carrier serves from this origin in year/quarter
.             bysort origin carrier year quarter: egen num_destinations = count(destination) // num_destinations
107.             bysort carrier year quarter: egen num_markets = count(market_code) // num_markets defined as number of dist
> inct markets served by this carrier in this origin in year/quarter
108. 
.             drop origin_carrier_pax origin_total_pax
109.             
.             // calculate rival stats using presence and num_markets
.             // These are calculated at the O-D level (market level)
.             sort origin destination year quarter
110.             by origin destination year quarter: egen double total_presence = total(presence)
111.             by origin destination year quarter: egen double total_num_markets = total(num_markets)
112.             by origin destination year quarter: egen double total_num_destinations = total(num_destinations)
113.             by origin destination year quarter: egen double total_distance = total(average_distance)
114. 
.             // Calculate rival average X (for future IV use)
.             
.             by origin destination year quarter: gen double average_presence_rival = ///
>                 (total_presence - presence) / ( _N - 1 )
115.             by origin destination year quarter: gen double average_num_markets_rival = ///
>                 (total_num_markets - num_markets) / ( _N - 1 )
116.             by origin destination year quarter: gen double average_num_destinations_rival = ///
>                 (total_num_destinations - num_destinations) / ( _N - 1 )
117.             by origin destination year quarter: gen double average_distance_rival = ///
>             (total_distance - average_distance) / ( _N - 1 )
118. 
.             by origin destination year quarter: gen int rival_carriers = _N - 1
119.             
.             drop total_distance 
120.             
.             keep if rival_carriers > 0 // removing monopolies
121. 
.             // Note: Mkt share creation now moved to demand_estimation.do
. 
.             // ---------------- Append to CSV --------------------------------
.             di as yellow "    ---------  Writing data to output file ---------"
122.             
.             // Save current quarter data
.             tempfile quarter_data
123.             save `quarter_data', replace
124. 
.             // make sure types are correct
.             // mkt and time to str
.             
.             // Determine if we need column headers (first time writing)
.             if `appendflag' == 0 {
125.                 di as yellow "           Writing headers for first quarter..."
126.                 export delimited using "${OUT_FILE}", replace
127.                 local appendflag = 1
128.             }
129.             else {
130.                 di as yellow "           Appending `Y'Q`Q' data to existing file..."
131.                 // Load existing data and append new quarter
.                 preserve
132.                 import delimited using "${OUT_FILE}", clear
133.                 append using `quarter_data'
134.                 export delimited using "${OUT_FILE}", replace
135.                 restore
136.             }
137.             
.             di as green "           Successfully wrote `Y'Q`Q' data to ${OUT_FILE}"
138.         }
139.     }
(25 observations deleted)
--------------------------------- Processing 2005 Q1 --------------------------------------
(encoding automatically selected: UTF-8)
(15 vars, 4,663,809 obs)
(232,228 observations deleted)
(256,906 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00000a saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       135,019
        from master                   135,019  
        from using                          0  

    Matched                         4,039,656  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       132,289
        from master                   132,289  
        from using                          0  

    Matched                         4,042,386  
    -----------------------------------------
(833,526 observations deleted)
(467 missing values generated)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,341,149  
    -----------------------------------------
(0 real changes made)
(3,341,149 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,341,149  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 2,985,587    176,350 | 3,161,937 
         1 |   175,409      3,803 |   179,212 
-----------+----------------------+----------
     Total | 3,160,996    180,153 | 3,341,149 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,341,149  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        29,409
        from master                    29,409  
        from using                          0  

    Matched                         3,311,740  
    -----------------------------------------
(0 real changes made)
(3,341,149 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        28,350
        from master                    28,350  
        from using                          0  

    Matched                         3,312,799  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        35,438
        from master                    35,438  
        from using                          0  

    Matched                         3,305,711  
    -----------------------------------------
(35,438 real changes made)
(3,341,149 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        34,809
        from master                    34,809  
        from using                          0  

    Matched                         3,306,340  
    -----------------------------------------
(34,809 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 1,684,855    742,061 | 2,426,916 
         1 |   737,345    176,888 |   914,233 
-----------+----------------------+----------
     Total | 2,422,200    918,949 | 3,341,149 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(3,309,697 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00000c saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            31,452  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     31,452    .1168855    .3076223          0          1
destinatio~b |     31,452    .1168136    .3076808          0          1
origin_slo~d |     31,452    .0269306    .1333403          0          1
destinatio~d |     31,452    .0267664    .1331508          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 31452
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(9,894 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(18,067 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(12,443 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(11,355 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(4,981 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(174 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(115 missing values generated)
(115 missing values generated)
(115 missing values generated)
(115 missing values generated)
(115 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00000d not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00000d saved as .dta format
           Writing headers for first quarter...
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2005Q1 data to ./data/processed/combined/airline_data.csv
--------------------------------- Processing 2005 Q2 --------------------------------------
(encoding automatically selected: UTF-8)
(15 vars, 5,329,759 obs)
(253,082 observations deleted)
(297,800 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00000e saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       151,526
        from master                   151,526  
        from using                          0  

    Matched                         4,627,351  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       149,872
        from master                   149,872  
        from using                          0  

    Matched                         4,629,005  
    -----------------------------------------
(896,286 observations deleted)
(656 missing values generated)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,882,591  
    -----------------------------------------
(0 real changes made)
(3,882,591 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,882,591  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 3,461,749    208,226 | 3,669,975 
         1 |   208,209      4,407 |   212,616 
-----------+----------------------+----------
     Total | 3,669,958    212,633 | 3,882,591 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,882,591  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        29,505
        from master                    29,505  
        from using                          0  

    Matched                         3,853,086  
    -----------------------------------------
(0 real changes made)
(3,882,591 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        28,801
        from master                    28,801  
        from using                          0  

    Matched                         3,853,790  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        38,415
        from master                    38,415  
        from using                          0  

    Matched                         3,844,176  
    -----------------------------------------
(38,415 real changes made)
(3,882,591 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        38,482
        from master                    38,482  
        from using                          0  

    Matched                         3,844,109  
    -----------------------------------------
(38,482 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 1,982,434    850,394 | 2,832,828 
         1 |   845,712    204,051 | 1,049,763 
-----------+----------------------+----------
     Total | 2,828,146  1,054,445 | 3,882,591 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(3,848,178 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00000g saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            34,413  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     34,413       .1152     .306436          0          1
destinatio~b |     34,413    .1149888    .3062215          0          1
origin_slo~d |     34,413    .0257745    .1306352          0          1
destinatio~d |     34,413    .0254812    .1295912          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 34413
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(10,500 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(19,514 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(13,581 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(12,168 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(5,585 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(211 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(136 missing values generated)
(136 missing values generated)
(136 missing values generated)
(136 missing values generated)
(136 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00000h not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00000h saved as .dta format
           Appending 2005Q2 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 31,337 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was int, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2005Q2 data to ./data/processed/combined/airline_data.csv
--------------------------------- Processing 2005 Q3 --------------------------------------
(encoding automatically selected: UTF-8)
(15 vars, 5,198,296 obs)
(266,451 observations deleted)
(306,044 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00000j saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       150,502
        from master                   150,502  
        from using                          0  

    Matched                         4,475,299  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       147,584
        from master                   147,584  
        from using                          0  

    Matched                         4,478,217  
    -----------------------------------------
(883,083 observations deleted)
(472 missing values generated)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,742,718  
    -----------------------------------------
(0 real changes made)
(3,742,718 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,742,718  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 3,354,727    191,618 | 3,546,345 
         1 |   192,292      4,081 |   196,373 
-----------+----------------------+----------
     Total | 3,547,019    195,699 | 3,742,718 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,742,718  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        23,772
        from master                    23,772  
        from using                          0  

    Matched                         3,718,946  
    -----------------------------------------
(0 real changes made)
(3,742,718 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        23,406
        from master                    23,406  
        from using                          0  

    Matched                         3,719,312  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        40,421
        from master                    40,421  
        from using                          0  

    Matched                         3,702,297  
    -----------------------------------------
(40,421 real changes made)
(3,742,718 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        39,718
        from master                    39,718  
        from using                          0  

    Matched                         3,703,000  
    -----------------------------------------
(39,718 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 1,915,865    813,903 | 2,729,768 
         1 |   813,626    199,324 | 1,012,950 
-----------+----------------------+----------
     Total | 2,729,491  1,013,227 | 3,742,718 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(3,708,710 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00000l saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            34,008  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     34,008    .1164622    .3075839          0          1
destinatio~b |     34,008     .116048    .3072341          0          1
origin_slo~d |     34,008    .0257292    .1299669          0          1
destinatio~d |     34,008    .0258381    .1307733          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 34008
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(10,385 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(19,260 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(13,400 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(11,916 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(5,582 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(195 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(143 missing values generated)
(143 missing values generated)
(143 missing values generated)
(143 missing values generated)
(143 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00000m not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00000m saved as .dta format
           Appending 2005Q3 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 65,614 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2005Q3 data to ./data/processed/combined/airline_data.csv
--------------------------------- Processing 2005 Q4 --------------------------------------
(encoding automatically selected: UTF-8)
(15 vars, 5,131,012 obs)
(239,521 observations deleted)
(283,240 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00000o saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       136,981
        from master                   136,981  
        from using                          0  

    Matched                         4,471,270  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       135,732
        from master                   135,732  
        from using                          0  

    Matched                         4,472,519  
    -----------------------------------------
(885,506 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,722,745  
    -----------------------------------------
(0 real changes made)
(3,722,745 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,722,745  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 3,340,498    188,640 | 3,529,138 
         1 |   189,669      3,938 |   193,607 
-----------+----------------------+----------
     Total | 3,530,167    192,578 | 3,722,745 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,722,745  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        28,926
        from master                    28,926  
        from using                          0  

    Matched                         3,693,819  
    -----------------------------------------
(0 real changes made)
(3,722,745 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        28,377
        from master                    28,377  
        from using                          0  

    Matched                         3,694,368  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        36,493
        from master                    36,493  
        from using                          0  

    Matched                         3,686,252  
    -----------------------------------------
(36,493 real changes made)
(3,722,745 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        36,778
        from master                    36,778  
        from using                          0  

    Matched                         3,685,967  
    -----------------------------------------
(36,778 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 1,859,773    832,840 | 2,692,613 
         1 |   832,139    197,993 | 1,030,132 
-----------+----------------------+----------
     Total | 2,691,912  1,030,833 | 3,722,745 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(3,689,736 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00000q saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            33,009  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     33,009    .1196162    .3112435          0          1
destinatio~b |     33,009    .1186754    .3100209          0          1
origin_slo~d |     33,009    .0265937    .1338313          0          1
destinatio~d |     33,009    .0262029    .1321951          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 33009
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(10,485 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(19,070 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(13,212 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(11,861 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(4,711 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(230 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(141 missing values generated)
(141 missing values generated)
(141 missing values generated)
(141 missing values generated)
(141 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00000r not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00000r saved as .dta format
           Appending 2005Q4 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 99,479 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2005Q4 data to ./data/processed/combined/airline_data.csv
(25 observations deleted)
--------------------------------- Processing 2006 Q1 --------------------------------------
(encoding automatically selected: UTF-8)
(15 vars, 4,776,596 obs)
(237,891 observations deleted)
(244,142 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00000t saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       135,969
        from master                   135,969  
        from using                          0  

    Matched                         4,158,594  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       133,436
        from master                   133,436  
        from using                          0  

    Matched                         4,161,127  
    -----------------------------------------
(827,738 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,466,825  
    -----------------------------------------
(0 real changes made)
(3,466,825 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,466,825  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 3,117,442    173,236 | 3,290,678 
         1 |   172,086      4,061 |   176,147 
-----------+----------------------+----------
     Total | 3,289,528    177,297 | 3,466,825 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,466,825  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        30,034
        from master                    30,034  
        from using                          0  

    Matched                         3,436,791  
    -----------------------------------------
(0 real changes made)
(3,466,825 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        28,518
        from master                    28,518  
        from using                          0  

    Matched                         3,438,307  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        35,697
        from master                    35,697  
        from using                          0  

    Matched                         3,431,128  
    -----------------------------------------
(35,697 real changes made)
(3,466,825 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        35,179
        from master                    35,179  
        from using                          0  

    Matched                         3,431,646  
    -----------------------------------------
(35,179 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 1,717,342    782,895 | 2,500,237 
         1 |   781,047    185,541 |   966,588 
-----------+----------------------+----------
     Total | 2,498,389    968,436 | 3,466,825 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(3,434,926 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00000v saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            31,899  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     31,899    .1191902    .3104162          0          1
destinatio~b |     31,899    .1190592     .310402          0          1
origin_slo~d |     31,899    .0270246     .135942          0          1
destinatio~d |     31,899     .027163    .1363368          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 31899
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(6,410 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(18,894 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(3,282 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(12,679 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(11,458 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(4,450 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(240 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(158 missing values generated)
(158 missing values generated)
(158 missing values generated)
(158 missing values generated)
(158 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00000w not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00000w saved as .dta format
           Appending 2006Q1 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 132,347 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2006Q1 data to ./data/processed/combined/airline_data.csv
--------------------------------- Processing 2006 Q2 --------------------------------------
(encoding automatically selected: UTF-8)
(15 vars, 5,476,476 obs)
(283,972 observations deleted)
(283,626 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000010 saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       157,789
        from master                   157,789  
        from using                          0  

    Matched                         4,751,089  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       156,091
        from master                   156,091  
        from using                          0  

    Matched                         4,752,787  
    -----------------------------------------
(884,686 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,024,192  
    -----------------------------------------
(0 real changes made)
(4,024,192 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,024,192  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 3,579,283    219,467 | 3,798,750 
         1 |   220,702      4,740 |   225,442 
-----------+----------------------+----------
     Total | 3,799,985    224,207 | 4,024,192 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,024,192  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        31,825
        from master                    31,825  
        from using                          0  

    Matched                         3,992,367  
    -----------------------------------------
(0 real changes made)
(4,024,192 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        31,328
        from master                    31,328  
        from using                          0  

    Matched                         3,992,864  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        39,179
        from master                    39,179  
        from using                          0  

    Matched                         3,985,013  
    -----------------------------------------
(39,179 real changes made)
(4,024,192 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        38,958
        from master                    38,958  
        from using                          0  

    Matched                         3,985,234  
    -----------------------------------------
(38,958 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 2,008,276    902,178 | 2,910,454 
         1 |   901,230    212,508 | 1,113,738 
-----------+----------------------+----------
     Total | 2,909,506  1,114,686 | 4,024,192 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(3,989,280 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000012 saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            34,912  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     34,912    .1168777    .3080205          0          1
destinatio~b |     34,912    .1163601     .307353          0          1
origin_slo~d |     34,912    .0273757    .1370518          0          1
destinatio~d |     34,912    .0270348    .1359388          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 34912
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(6,996 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(20,512 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(3,662 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(13,856 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(12,445 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(4,851 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(246 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(160 missing values generated)
(160 missing values generated)
(160 missing values generated)
(160 missing values generated)
(160 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000013 not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000013 saved as .dta format
           Appending 2006Q2 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 164,088 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2006Q2 data to ./data/processed/combined/airline_data.csv
--------------------------------- Processing 2006 Q3 --------------------------------------
(encoding automatically selected: UTF-8)
(15 vars, 5,139,735 obs)
(266,545 observations deleted)
(321,451 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000015 saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       151,321
        from master                   151,321  
        from using                          0  

    Matched                         4,400,418  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       147,712
        from master                   147,712  
        from using                          0  

    Matched                         4,404,027  
    -----------------------------------------
(865,726 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,686,013  
    -----------------------------------------
(0 real changes made)
(3,686,013 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,686,013  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 3,310,267    184,894 | 3,495,161 
         1 |   186,444      4,408 |   190,852 
-----------+----------------------+----------
     Total | 3,496,711    189,302 | 3,686,013 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,686,013  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        23,604
        from master                    23,604  
        from using                          0  

    Matched                         3,662,409  
    -----------------------------------------
(0 real changes made)
(3,686,013 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        22,898
        from master                    22,898  
        from using                          0  

    Matched                         3,663,115  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        38,717
        from master                    38,717  
        from using                          0  

    Matched                         3,647,296  
    -----------------------------------------
(38,717 real changes made)
(3,686,013 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        38,162
        from master                    38,162  
        from using                          0  

    Matched                         3,647,851  
    -----------------------------------------
(38,162 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 1,845,934    820,760 | 2,666,694 
         1 |   821,698    197,621 | 1,019,319 
-----------+----------------------+----------
     Total | 2,667,632  1,018,381 | 3,686,013 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(3,651,186 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000017 saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            34,827  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     34,827    .1185409    .3096503          0          1
destinatio~b |     34,827    .1176695    .3085166          0          1
origin_slo~d |     34,827    .0289272     .142612          0          1
destinatio~d |     34,827    .0283204    .1406756          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 34827
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(7,042 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(20,273 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(3,828 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(13,552 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(12,444 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(4,935 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(226 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(160 missing values generated)
(160 missing values generated)
(160 missing values generated)
(160 missing values generated)
(160 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000018 not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000018 saved as .dta format
           Appending 2006Q3 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 198,840 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2006Q3 data to ./data/processed/combined/airline_data.csv
--------------------------------- Processing 2006 Q4 --------------------------------------
(encoding automatically selected: UTF-8)
(15 vars, 5,141,974 obs)
(249,873 observations deleted)
(284,997 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00001a saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       141,396
        from master                   141,396  
        from using                          0  

    Matched                         4,465,708  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       140,433
        from master                   140,433  
        from using                          0  

    Matched                         4,466,671  
    -----------------------------------------
(858,470 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,748,634  
    -----------------------------------------
(0 real changes made)
(3,748,634 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,748,634  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 3,364,216    189,672 | 3,553,888 
         1 |   190,404      4,342 |   194,746 
-----------+----------------------+----------
     Total | 3,554,620    194,014 | 3,748,634 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,748,634  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        29,973
        from master                    29,973  
        from using                          0  

    Matched                         3,718,661  
    -----------------------------------------
(0 real changes made)
(3,748,634 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        29,564
        from master                    29,564  
        from using                          0  

    Matched                         3,719,070  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        39,401
        from master                    39,401  
        from using                          0  

    Matched                         3,709,233  
    -----------------------------------------
(39,401 real changes made)
(3,748,634 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        38,923
        from master                    38,923  
        from using                          0  

    Matched                         3,709,711  
    -----------------------------------------
(38,923 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 1,861,917    844,485 | 2,706,402 
         1 |   845,409    196,823 | 1,042,232 
-----------+----------------------+----------
     Total | 2,707,326  1,041,308 | 3,748,634 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(3,714,031 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00001c saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            34,603  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     34,603    .1175865    .3086565          0          1
destinatio~b |     34,603    .1176113    .3087521          0          1
origin_slo~d |     34,603    .0287328    .1420663          0          1
destinatio~d |     34,603    .0275888     .138824          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 34603
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(6,967 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(20,157 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(3,885 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(13,418 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(12,418 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(4,966 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(237 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(154 missing values generated)
(154 missing values generated)
(154 missing values generated)
(154 missing values generated)
(154 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00001d not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00001d saved as .dta format
           Appending 2006Q4 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 233,507 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2006Q4 data to ./data/processed/combined/airline_data.csv
(25 observations deleted)
--------------------------------- Processing 2007 Q1 --------------------------------------
(encoding automatically selected: UTF-8)
(15 vars, 4,795,202 obs)
(239,000 observations deleted)
(267,207 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00001f saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       138,433
        from master                   138,433  
        from using                          0  

    Matched                         4,150,562  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       136,230
        from master                   136,230  
        from using                          0  

    Matched                         4,152,765  
    -----------------------------------------
(802,223 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,486,772  
    -----------------------------------------
(0 real changes made)
(3,486,772 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,486,772  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 3,144,892    169,597 | 3,314,489 
         1 |   168,605      3,678 |   172,283 
-----------+----------------------+----------
     Total | 3,313,497    173,275 | 3,486,772 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,486,772  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        32,425
        from master                    32,425  
        from using                          0  

    Matched                         3,454,347  
    -----------------------------------------
(0 real changes made)
(3,486,772 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        31,260
        from master                    31,260  
        from using                          0  

    Matched                         3,455,512  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        36,118
        from master                    36,118  
        from using                          0  

    Matched                         3,450,654  
    -----------------------------------------
(36,118 real changes made)
(3,486,772 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        35,744
        from master                    35,744  
        from using                          0  

    Matched                         3,451,028  
    -----------------------------------------
(35,744 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 1,724,979    787,840 | 2,512,819 
         1 |   790,064    183,889 |   973,953 
-----------+----------------------+----------
     Total | 2,515,043    971,729 | 3,486,772 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(3,453,726 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00001h saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            33,046  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     33,046    .1187859    .3100626          0          1
destinatio~b |     33,046    .1173851    .3085288          0          1
origin_slo~d |     33,046     .028921    .1430117          0          1
destinatio~d |     33,046    .0285565     .141876          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 33046
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(6,302 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(16,016 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(7,877 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(12,655 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(11,767 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(4,991 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(241 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(162 missing values generated)
(162 missing values generated)
(162 missing values generated)
(162 missing values generated)
(162 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00001i not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00001i saved as .dta format
           Appending 2007Q1 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 267,956 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2007Q1 data to ./data/processed/combined/airline_data.csv
--------------------------------- Processing 2007 Q2 --------------------------------------
(encoding automatically selected: UTF-8)
(15 vars, 5,388,985 obs)
(275,257 observations deleted)
(302,854 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00001k saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       157,039
        from master                   157,039  
        from using                          0  

    Matched                         4,653,835  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       155,997
        from master                   155,997  
        from using                          0  

    Matched                         4,654,877  
    -----------------------------------------
(838,310 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,972,564  
    -----------------------------------------
(0 real changes made)
(3,972,564 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,972,564  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 3,552,812    207,454 | 3,760,266 
         1 |   207,730      4,568 |   212,298 
-----------+----------------------+----------
     Total | 3,760,542    212,022 | 3,972,564 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,972,564  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        32,885
        from master                    32,885  
        from using                          0  

    Matched                         3,939,679  
    -----------------------------------------
(0 real changes made)
(3,972,564 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        32,509
        from master                    32,509  
        from using                          0  

    Matched                         3,940,055  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        41,615
        from master                    41,615  
        from using                          0  

    Matched                         3,930,949  
    -----------------------------------------
(41,615 real changes made)
(3,972,564 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        41,606
        from master                    41,606  
        from using                          0  

    Matched                         3,930,958  
    -----------------------------------------
(41,606 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 2,008,117    873,951 | 2,882,068 
         1 |   874,510    215,986 | 1,090,496 
-----------+----------------------+----------
     Total | 2,882,627  1,089,937 | 3,972,564 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(3,937,581 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00001m saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            34,983  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     34,983    .1172709    .3079432          0          1
destinatio~b |     34,983    .1165561      .30717          0          1
origin_slo~d |     34,983    .0281798    .1405939          0          1
destinatio~d |     34,983    .0276132    .1389547          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 34983
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(6,024 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(17,223 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(8,530 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(13,670 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(12,733 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(5,415 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(265 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(185 missing values generated)
(185 missing values generated)
(185 missing values generated)
(185 missing values generated)
(185 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00001n not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00001n saved as .dta format
           Appending 2007Q2 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 300,840 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2007Q2 data to ./data/processed/combined/airline_data.csv
--------------------------------- Processing 2007 Q3 --------------------------------------
(encoding automatically selected: UTF-8)
(15 vars, 5,255,983 obs)
(270,249 observations deleted)
(317,035 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00001p saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       154,784
        from master                   154,784  
        from using                          0  

    Matched                         4,513,915  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       152,555
        from master                   152,555  
        from using                          0  

    Matched                         4,516,144  
    -----------------------------------------
(846,234 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,822,465  
    -----------------------------------------
(0 real changes made)
(3,822,465 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,822,465  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 3,428,881    194,312 | 3,623,193 
         1 |   194,807      4,465 |   199,272 
-----------+----------------------+----------
     Total | 3,623,688    198,777 | 3,822,465 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,822,465  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        29,249
        from master                    29,249  
        from using                          0  

    Matched                         3,793,216  
    -----------------------------------------
(0 real changes made)
(3,822,465 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        28,679
        from master                    28,679  
        from using                          0  

    Matched                         3,793,786  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        39,966
        from master                    39,966  
        from using                          0  

    Matched                         3,782,499  
    -----------------------------------------
(39,966 real changes made)
(3,822,465 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        39,856
        from master                    39,856  
        from using                          0  

    Matched                         3,782,609  
    -----------------------------------------
(39,856 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 1,935,017    839,635 | 2,774,652 
         1 |   839,698    208,115 | 1,047,813 
-----------+----------------------+----------
     Total | 2,774,715  1,047,750 | 3,822,465 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(3,788,389 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00001r saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            34,076  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     34,076    .1201403    .3112186          0          1
destinatio~b |     34,076    .1194074    .3103815          0          1
origin_slo~d |     34,076    .0278975    .1409531          0          1
destinatio~d |     34,076    .0276013    .1403073          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 34076
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(5,323 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(17,019 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(8,534 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(13,406 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(12,704 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(5,421 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(260 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(173 missing values generated)
(173 missing values generated)
(173 missing values generated)
(173 missing values generated)
(173 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00001s not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00001s saved as .dta format
           Appending 2007Q3 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 335,638 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2007Q3 data to ./data/processed/combined/airline_data.csv
--------------------------------- Processing 2007 Q4 --------------------------------------
(encoding automatically selected: UTF-8)
(15 vars, 5,338,581 obs)
(246,435 observations deleted)
(306,706 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00001u saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       146,905
        from master                   146,905  
        from using                          0  

    Matched                         4,638,535  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       146,089
        from master                   146,089  
        from using                          0  

    Matched                         4,639,351  
    -----------------------------------------
(856,890 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,928,550  
    -----------------------------------------
(0 real changes made)
(3,928,550 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,928,550  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 3,524,167    199,834 | 3,724,001 
         1 |   200,274      4,275 |   204,549 
-----------+----------------------+----------
     Total | 3,724,441    204,109 | 3,928,550 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,928,550  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        34,386
        from master                    34,386  
        from using                          0  

    Matched                         3,894,164  
    -----------------------------------------
(0 real changes made)
(3,928,550 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        34,120
        from master                    34,120  
        from using                          0  

    Matched                         3,894,430  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        40,534
        from master                    40,534  
        from using                          0  

    Matched                         3,888,016  
    -----------------------------------------
(40,534 real changes made)
(3,928,550 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        40,567
        from master                    40,567  
        from using                          0  

    Matched                         3,887,983  
    -----------------------------------------
(40,567 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 1,927,765    890,550 | 2,818,315 
         1 |   890,999    219,236 | 1,110,235 
-----------+----------------------+----------
     Total | 2,818,764  1,109,786 | 3,928,550 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(3,895,691 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00001w saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            32,859  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     32,859    .1181007    .3085821          0          1
destinatio~b |     32,859    .1168219    .3071577          0          1
origin_slo~d |     32,859    .0280058    .1410679          0          1
destinatio~d |     32,859    .0276258    .1405005          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 32859
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(4,729 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(16,693 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(8,285 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(13,069 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(12,350 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(5,324 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(289 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(168 missing values generated)
(168 missing values generated)
(168 missing values generated)
(168 missing values generated)
(168 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00001x not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00001x saved as .dta format
           Appending 2007Q4 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 369,541 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2007Q4 data to ./data/processed/combined/airline_data.csv
(25 observations deleted)
--------------------------------- Processing 2008 Q1 --------------------------------------
(encoding automatically selected: UTF-8)
(15 vars, 4,976,283 obs)
(230,185 observations deleted)
(266,655 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000021 saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       145,254
        from master                   145,254  
        from using                          0  

    Matched                         4,334,189  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       142,935
        from master                   142,935  
        from using                          0  

    Matched                         4,336,508  
    -----------------------------------------
(784,268 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,695,175  
    -----------------------------------------
(0 real changes made)
(3,695,175 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,695,175  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 3,320,133    186,183 | 3,506,316 
         1 |   185,222      3,637 |   188,859 
-----------+----------------------+----------
     Total | 3,505,355    189,820 | 3,695,175 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,695,175  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        35,771
        from master                    35,771  
        from using                          0  

    Matched                         3,659,404  
    -----------------------------------------
(0 real changes made)
(3,695,175 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        34,565
        from master                    34,565  
        from using                          0  

    Matched                         3,660,610  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        37,125
        from master                    37,125  
        from using                          0  

    Matched                         3,658,050  
    -----------------------------------------
(37,125 real changes made)
(3,695,175 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        36,861
        from master                    36,861  
        from using                          0  

    Matched                         3,658,314  
    -----------------------------------------
(36,861 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 1,791,969    845,473 | 2,637,442 
         1 |   848,053    209,680 | 1,057,733 
-----------+----------------------+----------
     Total | 2,640,022  1,055,153 | 3,695,175 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(3,665,146 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000023 saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            30,029  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     30,029    .1213889    .3124216          0          1
destinatio~b |     30,029    .1206128    .3117208          0          1
origin_slo~d |     30,029    .0272361    .1391642          0          1
destinatio~d |     30,029    .0268872    .1386501          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 30029
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(4,336 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(14,995 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(7,666 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(11,869 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(11,202 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(4,938 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(272 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(177 missing values generated)
(177 missing values generated)
(177 missing values generated)
(177 missing values generated)
(177 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000024 not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000024 saved as .dta format
           Appending 2008Q1 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 402,232 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2008Q1 data to ./data/processed/combined/airline_data.csv
--------------------------------- Processing 2008 Q2 --------------------------------------
(encoding automatically selected: UTF-8)
(15 vars, 5,939,525 obs)
(268,075 observations deleted)
(308,363 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000026 saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       163,523
        from master                   163,523  
        from using                          0  

    Matched                         5,199,564  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       160,831
        from master                   160,831  
        from using                          0  

    Matched                         5,202,256  
    -----------------------------------------
(866,228 observations deleted)
(6 missing values generated)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,496,859  
    -----------------------------------------
(0 real changes made)
(4,496,859 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,496,859  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 4,038,802    226,179 | 4,264,981 
         1 |   227,266      4,612 |   231,878 
-----------+----------------------+----------
     Total | 4,266,068    230,791 | 4,496,859 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,496,859  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        38,039
        from master                    38,039  
        from using                          0  

    Matched                         4,458,820  
    -----------------------------------------
(0 real changes made)
(4,496,859 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        37,437
        from master                    37,437  
        from using                          0  

    Matched                         4,459,422  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        41,192
        from master                    41,192  
        from using                          0  

    Matched                         4,455,667  
    -----------------------------------------
(41,192 real changes made)
(4,496,859 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        40,519
        from master                    40,519  
        from using                          0  

    Matched                         4,456,340  
    -----------------------------------------
(40,519 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 2,220,323  1,016,726 | 3,237,049 
         1 | 1,018,673    241,137 | 1,259,810 
-----------+----------------------+----------
     Total | 3,238,996  1,257,863 | 4,496,859 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(4,462,854 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000028 saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            34,005  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     34,005    .1183206    .3099925          0          1
destinatio~b |     34,005     .117599    .3092712          0          1
origin_slo~d |     34,005     .025408    .1332434          0          1
destinatio~d |     34,005    .0253588    .1331843          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 34005
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(4,762 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(17,307 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(8,709 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(13,551 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(12,951 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(5,178 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(304 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(192 missing values generated)
(192 missing values generated)
(192 missing values generated)
(192 missing values generated)
(192 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000029 not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000029 saved as .dta format
           Appending 2008Q2 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 432,084 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2008Q2 data to ./data/processed/combined/airline_data.csv
--------------------------------- Processing 2008 Q3 --------------------------------------
(encoding automatically selected: UTF-8)
(15 vars, 5,251,799 obs)
(253,931 observations deleted)
(321,995 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00002b saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       147,450
        from master                   147,450  
        from using                          0  

    Matched                         4,528,423  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       144,892
        from master                   144,892  
        from using                          0  

    Matched                         4,530,981  
    -----------------------------------------
(837,646 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,838,227  
    -----------------------------------------
(0 real changes made)
(3,838,227 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,838,227  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 3,445,272    194,104 | 3,639,376 
         1 |   194,975      3,876 |   198,851 
-----------+----------------------+----------
     Total | 3,640,247    197,980 | 3,838,227 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,838,227  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        31,276
        from master                    31,276  
        from using                          0  

    Matched                         3,806,951  
    -----------------------------------------
(0 real changes made)
(3,838,227 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        30,194
        from master                    30,194  
        from using                          0  

    Matched                         3,808,033  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        34,511
        from master                    34,511  
        from using                          0  

    Matched                         3,803,716  
    -----------------------------------------
(34,511 real changes made)
(3,838,227 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        34,265
        from master                    34,265  
        from using                          0  

    Matched                         3,803,962  
    -----------------------------------------
(34,265 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 1,945,151    840,959 | 2,786,110 
         1 |   842,982    209,135 | 1,052,117 
-----------+----------------------+----------
     Total | 2,788,133  1,050,094 | 3,838,227 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(3,805,217 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00002d saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            33,010  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     33,010    .1195705    .3108056          0          1
destinatio~b |     33,010    .1187732    .3098109          0          1
origin_slo~d |     33,010    .0269985    .1371649          0          1
destinatio~d |     33,010    .0264475    .1357553          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 33010
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(4,632 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(16,766 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(8,463 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(13,153 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(12,576 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(4,887 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(258 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(169 missing values generated)
(169 missing values generated)
(169 missing values generated)
(169 missing values generated)
(169 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00002e not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00002e saved as .dta format
           Appending 2008Q3 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 465,897 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2008Q3 data to ./data/processed/combined/airline_data.csv
--------------------------------- Processing 2008 Q4 --------------------------------------
(encoding automatically selected: UTF-8)
(15 vars, 5,065,356 obs)
(227,603 observations deleted)
(291,352 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00002g saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       129,579
        from master                   129,579  
        from using                          0  

    Matched                         4,416,822  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       129,359
        from master                   129,359  
        from using                          0  

    Matched                         4,417,042  
    -----------------------------------------
(816,494 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,729,907  
    -----------------------------------------
(0 real changes made)
(3,729,907 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,729,907  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 3,359,444    183,118 | 3,542,562 
         1 |   183,567      3,778 |   187,345 
-----------+----------------------+----------
     Total | 3,543,011    186,896 | 3,729,907 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,729,907  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        29,074
        from master                    29,074  
        from using                          0  

    Matched                         3,700,833  
    -----------------------------------------
(0 real changes made)
(3,729,907 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        29,304
        from master                    29,304  
        from using                          0  

    Matched                         3,700,603  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        33,654
        from master                    33,654  
        from using                          0  

    Matched                         3,696,253  
    -----------------------------------------
(33,654 real changes made)
(3,729,907 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        34,046
        from master                    34,046  
        from using                          0  

    Matched                         3,695,861  
    -----------------------------------------
(34,046 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 1,878,323    822,434 | 2,700,757 
         1 |   823,603    205,547 | 1,029,150 
-----------+----------------------+----------
     Total | 2,701,926  1,027,981 | 3,729,907 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(3,698,357 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00002i saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            31,550  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     31,550    .1219453    .3141186          0          1
destinatio~b |     31,550    .1207857    .3129398          0          1
origin_slo~d |     31,550    .0270366    .1383263          0          1
destinatio~d |     31,550    .0267823    .1379941          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 31550
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(4,444 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(15,975 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(8,192 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(12,543 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(12,169 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(4,448 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(234 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(173 missing values generated)
(173 missing values generated)
(173 missing values generated)
(173 missing values generated)
(173 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00002j not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00002j saved as .dta format
           Appending 2008Q4 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 498,738 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2008Q4 data to ./data/processed/combined/airline_data.csv
(25 observations deleted)
--------------------------------- Processing 2009 Q1 --------------------------------------
(encoding automatically selected: UTF-8)
(15 vars, 4,383,572 obs)
(226,009 observations deleted)
(239,437 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00002l saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       129,716
        from master                   129,716  
        from using                          0  

    Matched                         3,788,410  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       127,553
        from master                   127,553  
        from using                          0  

    Matched                         3,790,573  
    -----------------------------------------
(743,727 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,174,399  
    -----------------------------------------
(0 real changes made)
(3,174,399 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,174,399  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 2,863,381    154,000 | 3,017,381 
         1 |   153,414      3,604 |   157,018 
-----------+----------------------+----------
     Total | 3,016,795    157,604 | 3,174,399 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,174,399  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        32,717
        from master                    32,717  
        from using                          0  

    Matched                         3,141,682  
    -----------------------------------------
(0 real changes made)
(3,174,399 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        31,313
        from master                    31,313  
        from using                          0  

    Matched                         3,143,086  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        30,842
        from master                    30,842  
        from using                          0  

    Matched                         3,143,557  
    -----------------------------------------
(30,842 real changes made)
(3,174,399 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        30,754
        from master                    30,754  
        from using                          0  

    Matched                         3,143,645  
    -----------------------------------------
(30,754 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 1,625,166    688,755 | 2,313,921 
         1 |   688,987    171,491 |   860,478 
-----------+----------------------+----------
     Total | 2,314,153    860,246 | 3,174,399 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(3,144,779 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00002n saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            29,620  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     29,620    .1232105     .315657          0          1
destinatio~b |     29,620    .1221183    .3145058          0          1
origin_slo~d |     29,620    .0278091    .1409761          0          1
destinatio~d |     29,620    .0270317    .1385767          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 29620
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(4,159 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(12,894 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(9,972 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(11,691 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(11,374 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(4,350 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(214 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(178 missing values generated)
(178 missing values generated)
(178 missing values generated)
(178 missing values generated)
(178 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00002o not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00002o saved as .dta format
           Appending 2009Q1 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 530,115 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2009Q1 data to ./data/processed/combined/airline_data.csv
--------------------------------- Processing 2009 Q2 --------------------------------------
(encoding automatically selected: UTF-8)
(15 vars, 5,229,471 obs)
(286,392 observations deleted)
(280,947 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00002q saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       141,453
        from master                   141,453  
        from using                          0  

    Matched                         4,520,679  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       140,880
        from master                   140,880  
        from using                          0  

    Matched                         4,521,252  
    -----------------------------------------
(822,832 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,839,300  
    -----------------------------------------
(0 real changes made)
(3,839,300 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,839,300  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 3,444,773    194,105 | 3,638,878 
         1 |   196,156      4,266 |   200,422 
-----------+----------------------+----------
     Total | 3,640,929    198,371 | 3,839,300 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,839,300  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        32,074
        from master                    32,074  
        from using                          0  

    Matched                         3,807,226  
    -----------------------------------------
(0 real changes made)
(3,839,300 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        31,990
        from master                    31,990  
        from using                          0  

    Matched                         3,807,310  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        35,500
        from master                    35,500  
        from using                          0  

    Matched                         3,803,800  
    -----------------------------------------
(35,500 real changes made)
(3,839,300 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        35,421
        from master                    35,421  
        from using                          0  

    Matched                         3,803,879  
    -----------------------------------------
(35,421 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 1,965,415    832,982 | 2,798,397 
         1 |   833,315    207,588 | 1,040,903 
-----------+----------------------+----------
     Total | 2,798,730  1,040,570 | 3,839,300 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(3,806,587 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00002s saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            32,713  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     32,713    .1191262    .3108352          0          1
destinatio~b |     32,713    .1183885    .3102555          0          1
origin_slo~d |     32,713    .0277033    .1398671          0          1
destinatio~d |     32,713    .0264167    .1364915          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 32713
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(4,554 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(14,377 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(10,834 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(12,865 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(12,702 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(4,633 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(251 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(185 missing values generated)
(185 missing values generated)
(185 missing values generated)
(185 missing values generated)
(185 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00002t not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00002t saved as .dta format
           Appending 2009Q2 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 559,557 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2009Q2 data to ./data/processed/combined/airline_data.csv
--------------------------------- Processing 2009 Q3 --------------------------------------
(encoding automatically selected: UTF-8)
(15 vars, 5,330,911 obs)
(299,694 observations deleted)
(296,299 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00002v saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       138,988
        from master                   138,988  
        from using                          0  

    Matched                         4,595,930  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       136,056
        from master                   136,056  
        from using                          0  

    Matched                         4,598,862  
    -----------------------------------------
(844,909 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,890,009  
    -----------------------------------------
(0 real changes made)
(3,890,009 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,890,009  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 3,487,505    199,009 | 3,686,514 
         1 |   199,587      3,908 |   203,495 
-----------+----------------------+----------
     Total | 3,687,092    202,917 | 3,890,009 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,890,009  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        28,176
        from master                    28,176  
        from using                          0  

    Matched                         3,861,833  
    -----------------------------------------
(0 real changes made)
(3,890,009 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        27,680
        from master                    27,680  
        from using                          0  

    Matched                         3,862,329  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        33,837
        from master                    33,837  
        from using                          0  

    Matched                         3,856,172  
    -----------------------------------------
(33,837 real changes made)
(3,890,009 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        33,009
        from master                    33,009  
        from using                          0  

    Matched                         3,857,000  
    -----------------------------------------
(33,009 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 1,983,009    845,945 | 2,828,954 
         1 |   849,683    211,372 | 1,061,055 
-----------+----------------------+----------
     Total | 2,832,692  1,057,317 | 3,890,009 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(3,857,551 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00002x saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            32,458  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     32,458    .1198239    .3113816          0          1
destinatio~b |     32,458    .1195469    .3111738          0          1
origin_slo~d |     32,458    .0273945    .1382753          0          1
destinatio~d |     32,458    .0271737    .1379198          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 32458
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(4,429 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(14,363 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(10,787 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(12,628 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(12,718 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(4,699 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(242 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(164 missing values generated)
(164 missing values generated)
(164 missing values generated)
(164 missing values generated)
(164 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000030 not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000030 saved as .dta format
           Appending 2009Q3 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 592,085 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2009Q3 data to ./data/processed/combined/airline_data.csv
--------------------------------- Processing 2009 Q4 --------------------------------------
(encoding automatically selected: UTF-8)
(15 vars, 5,477,362 obs)
(284,669 observations deleted)
(269,472 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000032 saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       128,809
        from master                   128,809  
        from using                          0  

    Matched                         4,794,412  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       128,666
        from master                   128,666  
        from using                          0  

    Matched                         4,794,555  
    -----------------------------------------
(823,133 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,100,088  
    -----------------------------------------
(0 real changes made)
(4,100,088 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,100,088  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 3,676,556    209,241 | 3,885,797 
         1 |   210,373      3,918 |   214,291 
-----------+----------------------+----------
     Total | 3,886,929    213,159 | 4,100,088 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,100,088  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        29,431
        from master                    29,431  
        from using                          0  

    Matched                         4,070,657  
    -----------------------------------------
(0 real changes made)
(4,100,088 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        29,918
        from master                    29,918  
        from using                          0  

    Matched                         4,070,170  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        33,597
        from master                    33,597  
        from using                          0  

    Matched                         4,066,491  
    -----------------------------------------
(33,597 real changes made)
(4,100,088 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        33,420
        from master                    33,420  
        from using                          0  

    Matched                         4,066,668  
    -----------------------------------------
(33,420 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 2,004,135    929,492 | 2,933,627 
         1 |   933,948    232,513 | 1,166,461 
-----------+----------------------+----------
     Total | 2,938,083  1,162,005 | 4,100,088 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(4,068,698 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000034 saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            31,390  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     31,390    .1227149     .315153          0          1
destinatio~b |     31,390    .1217803    .3141955          0          1
origin_slo~d |     31,390    .0278655    .1405261          0          1
destinatio~d |     31,390    .0268012    .1372777          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 31390
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(4,364 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(13,569 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(10,608 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(12,207 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(12,198 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(4,653 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(225 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(172 missing values generated)
(172 missing values generated)
(172 missing values generated)
(172 missing values generated)
(172 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000035 not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000035 saved as .dta format
           Appending 2009Q4 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 624,379 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2009Q4 data to ./data/processed/combined/airline_data.csv
(25 observations deleted)
--------------------------------- Processing 2010 Q1 --------------------------------------
(encoding automatically selected: UTF-8)
(15 vars, 4,906,864 obs)
(217,272 observations deleted)
(241,380 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000037 saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       131,771
        from master                   131,771  
        from using                          0  

    Matched                         4,316,441  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       129,586
        from master                   129,586  
        from using                          0  

    Matched                         4,318,626  
    -----------------------------------------
(788,989 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,659,223  
    -----------------------------------------
(0 real changes made)
(3,659,223 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,659,223  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 3,282,419    187,288 | 3,469,707 
         1 |   186,340      3,176 |   189,516 
-----------+----------------------+----------
     Total | 3,468,759    190,464 | 3,659,223 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,659,223  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        34,028
        from master                    34,028  
        from using                          0  

    Matched                         3,625,195  
    -----------------------------------------
(0 real changes made)
(3,659,223 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        32,172
        from master                    32,172  
        from using                          0  

    Matched                         3,627,051  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        29,814
        from master                    29,814  
        from using                          0  

    Matched                         3,629,409  
    -----------------------------------------
(29,814 real changes made)
(3,659,223 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        29,637
        from master                    29,637  
        from using                          0  

    Matched                         3,629,586  
    -----------------------------------------
(29,637 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 1,770,004    830,752 | 2,600,756 
         1 |   833,140    225,327 | 1,058,467 
-----------+----------------------+----------
     Total | 2,603,144  1,056,079 | 3,659,223 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(3,629,078 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000039 saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            30,145  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     30,145    .1257671    .3183873          0          1
destinatio~b |     30,145    .1250532    .3177338          0          1
origin_slo~d |     30,145    .0283777     .142911          0          1
destinatio~d |     30,145    .0269951    .1386272          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 30145
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(4,230 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(10,750 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(7,942 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(11,941 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(11,244 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(4,760 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(213 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(159 missing values generated)
(159 missing values generated)
(159 missing values generated)
(159 missing values generated)
(159 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00003a not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00003a saved as .dta format
           Appending 2010Q1 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 655,597 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2010Q1 data to ./data/processed/combined/airline_data.csv
--------------------------------- Processing 2010 Q2 --------------------------------------
(encoding automatically selected: UTF-8)
(15 vars, 5,782,414 obs)
(227,506 observations deleted)
(281,240 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00003c saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       150,639
        from master                   150,639  
        from using                          0  

    Matched                         5,123,029  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       149,806
        from master                   149,806  
        from using                          0  

    Matched                         5,123,862  
    -----------------------------------------
(878,255 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,395,413  
    -----------------------------------------
(0 real changes made)
(4,395,413 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,395,413  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 3,919,551    236,066 | 4,155,617 
         1 |   235,256      4,540 |   239,796 
-----------+----------------------+----------
     Total | 4,154,807    240,606 | 4,395,413 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,395,413  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        33,855
        from master                    33,855  
        from using                          0  

    Matched                         4,361,558  
    -----------------------------------------
(0 real changes made)
(4,395,413 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        33,280
        from master                    33,280  
        from using                          0  

    Matched                         4,362,133  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        36,104
        from master                    36,104  
        from using                          0  

    Matched                         4,359,309  
    -----------------------------------------
(36,104 real changes made)
(4,395,413 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        35,977
        from master                    35,977  
        from using                          0  

    Matched                         4,359,436  
    -----------------------------------------
(35,977 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 2,125,501    992,494 | 3,117,995 
         1 |   992,855    284,563 | 1,277,418 
-----------+----------------------+----------
     Total | 3,118,356  1,277,057 | 4,395,413 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(4,364,584 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00003e saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            30,829  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     30,829    .1295284    .3216315          0          1
destinatio~b |     30,829    .1290434    .3212818          0          1
origin_slo~d |     30,829     .027108    .1403527          0          1
destinatio~d |     30,829    .0260097    .1369951          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 30829
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(4,913 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(8,585 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(8,952 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(13,578 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(9,265 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(5,531 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(260 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(170 missing values generated)
(170 missing values generated)
(170 missing values generated)
(170 missing values generated)
(170 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00003f not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00003f saved as .dta format
           Appending 2010Q2 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 685,583 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2010Q2 data to ./data/processed/combined/airline_data.csv
--------------------------------- Processing 2010 Q3 --------------------------------------
(encoding automatically selected: UTF-8)
(15 vars, 5,613,491 obs)
(235,554 observations deleted)
(308,883 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00003h saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       149,164
        from master                   149,164  
        from using                          0  

    Matched                         4,919,890  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       146,234
        from master                   146,234  
        from using                          0  

    Matched                         4,922,820  
    -----------------------------------------
(890,720 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,178,334  
    -----------------------------------------
(0 real changes made)
(4,178,334 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,178,334  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 3,711,675    230,762 | 3,942,437 
         1 |   232,033      3,864 |   235,897 
-----------+----------------------+----------
     Total | 3,943,708    234,626 | 4,178,334 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,178,334  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        30,907
        from master                    30,907  
        from using                          0  

    Matched                         4,147,427  
    -----------------------------------------
(0 real changes made)
(4,178,334 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        29,859
        from master                    29,859  
        from using                          0  

    Matched                         4,148,475  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        34,893
        from master                    34,893  
        from using                          0  

    Matched                         4,143,441  
    -----------------------------------------
(34,893 real changes made)
(4,178,334 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        34,863
        from master                    34,863  
        from using                          0  

    Matched                         4,143,471  
    -----------------------------------------
(34,863 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 2,032,379    937,286 | 2,969,665 
         1 |   937,568    271,101 | 1,208,669 
-----------+----------------------+----------
     Total | 2,969,947  1,208,387 | 4,178,334 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(4,147,321 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00003j saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            31,013  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     31,013     .129959    .3217732          0          1
destinatio~b |     31,013     .129291    .3212065          0          1
origin_slo~d |     31,013    .0277545    .1419998          0          1
destinatio~d |     31,013    .0269588    .1396526          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 31013
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(4,903 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(8,512 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(9,057 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(13,665 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(9,196 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(5,741 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(251 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(160 missing values generated)
(160 missing values generated)
(160 missing values generated)
(160 missing values generated)
(160 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00003k not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00003k saved as .dta format
           Appending 2010Q3 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 716,242 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2010Q3 data to ./data/processed/combined/airline_data.csv
--------------------------------- Processing 2010 Q4 --------------------------------------
(encoding automatically selected: UTF-8)
(15 vars, 5,735,916 obs)
(222,734 observations deleted)
(277,717 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00003m saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       144,565
        from master                   144,565  
        from using                          0  

    Matched                         5,090,900  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       143,862
        from master                   143,862  
        from using                          0  

    Matched                         5,091,603  
    -----------------------------------------
(890,749 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,344,716  
    -----------------------------------------
(0 real changes made)
(4,344,716 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,344,716  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 3,861,696    238,409 | 4,100,105 
         1 |   240,033      4,578 |   244,611 
-----------+----------------------+----------
     Total | 4,101,729    242,987 | 4,344,716 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,344,716  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        32,300
        from master                    32,300  
        from using                          0  

    Matched                         4,312,416  
    -----------------------------------------
(0 real changes made)
(4,344,716 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        32,375
        from master                    32,375  
        from using                          0  

    Matched                         4,312,341  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        36,086
        from master                    36,086  
        from using                          0  

    Matched                         4,308,630  
    -----------------------------------------
(36,086 real changes made)
(4,344,716 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        35,877
        from master                    35,877  
        from using                          0  

    Matched                         4,308,839  
    -----------------------------------------
(35,877 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 2,058,861    999,599 | 3,058,460 
         1 | 1,006,221    280,035 | 1,286,256 
-----------+----------------------+----------
     Total | 3,065,082  1,279,634 | 4,344,716 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(4,315,051 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00003o saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            29,665  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     29,665    .1319923    .3238345          0          1
destinatio~b |     29,665    .1313142    .3230382          0          1
origin_slo~d |     29,665    .0276714    .1412186          0          1
destinatio~d |     29,665    .0271678    .1399692          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 29665
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(4,794 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(8,567 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(8,854 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(13,448 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(8,943 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(4,946 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(259 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(163 missing values generated)
(163 missing values generated)
(163 missing values generated)
(163 missing values generated)
(163 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00003p not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00003p saved as .dta format
           Appending 2010Q4 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 747,095 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2010Q4 data to ./data/processed/combined/airline_data.csv
(25 observations deleted)
--------------------------------- Processing 2011 Q1 --------------------------------------
(encoding automatically selected: ISO-8859-1)
(15 vars, 5,382,059 obs)
(207,864 observations deleted)
(258,500 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00003r saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       145,201
        from master                   145,201  
        from using                          0  

    Matched                         4,770,494  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       143,732
        from master                   143,732  
        from using                          0  

    Matched                         4,771,963  
    -----------------------------------------
(843,526 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,072,169  
    -----------------------------------------
(0 real changes made)
(4,072,169 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,072,169  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 3,636,081    216,690 | 3,852,771 
         1 |   214,926      4,472 |   219,398 
-----------+----------------------+----------
     Total | 3,851,007    221,162 | 4,072,169 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,072,169  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        38,712
        from master                    38,712  
        from using                          0  

    Matched                         4,033,457  
    -----------------------------------------
(0 real changes made)
(4,072,169 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        37,074
        from master                    37,074  
        from using                          0  

    Matched                         4,035,095  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        32,544
        from master                    32,544  
        from using                          0  

    Matched                         4,039,625  
    -----------------------------------------
(32,544 real changes made)
(4,072,169 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        32,507
        from master                    32,507  
        from using                          0  

    Matched                         4,039,662  
    -----------------------------------------
(32,507 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 1,920,566    944,248 | 2,864,814 
         1 |   944,411    262,944 | 1,207,355 
-----------+----------------------+----------
     Total | 2,864,977  1,207,192 | 4,072,169 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(4,044,541 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00003t saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            27,628  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     27,628     .134487    .3265123          0          1
destinatio~b |     27,628    .1335818    .3253181          0          1
origin_slo~d |     27,628    .0270281    .1394334          0          1
destinatio~d |     27,628    .0265405    .1376257          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 27628
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(12,594 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(12,722 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(12,594 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(8,269 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(4,490 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(236 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(185 missing values generated)
(185 missing values generated)
(185 missing values generated)
(185 missing values generated)
(185 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00003u not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00003u saved as .dta format
           Appending 2011Q1 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 776,597 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2011Q1 data to ./data/processed/combined/airline_data.csv
--------------------------------- Processing 2011 Q2 --------------------------------------
(encoding automatically selected: UTF-8)
(15 vars, 5,935,437 obs)
(270,226 observations deleted)
(300,154 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00003w saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       159,033
        from master                   159,033  
        from using                          0  

    Matched                         5,206,024  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       159,157
        from master                   159,157  
        from using                          0  

    Matched                         5,205,900  
    -----------------------------------------
(886,875 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,478,182  
    -----------------------------------------
(0 real changes made)
(4,478,182 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,478,182  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 3,981,064    246,555 | 4,227,619 
         1 |   246,449      4,114 |   250,563 
-----------+----------------------+----------
     Total | 4,227,513    250,669 | 4,478,182 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,478,182  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        33,494
        from master                    33,494  
        from using                          0  

    Matched                         4,444,688  
    -----------------------------------------
(0 real changes made)
(4,478,182 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        32,969
        from master                    32,969  
        from using                          0  

    Matched                         4,445,213  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        39,233
        from master                    39,233  
        from using                          0  

    Matched                         4,438,949  
    -----------------------------------------
(39,233 real changes made)
(4,478,182 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        39,321
        from master                    39,321  
        from using                          0  

    Matched                         4,438,861  
    -----------------------------------------
(39,321 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 2,150,058  1,021,134 | 3,171,192 
         1 | 1,022,180    284,810 | 1,306,990 
-----------+----------------------+----------
     Total | 3,172,238  1,305,944 | 4,478,182 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(4,447,436 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000040 saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            30,746  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     30,746    .1303608    .3223009          0          1
destinatio~b |     30,746    .1304684    .3222402          0          1
origin_slo~d |     30,746    .0267723     .139149          0          1
destinatio~d |     30,746    .0258157     .135862          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 30746
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(14,173 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(14,100 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(14,173 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(9,199 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(4,913 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(316 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(204 missing values generated)
(204 missing values generated)
(204 missing values generated)
(204 missing values generated)
(204 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000041 not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000041 saved as .dta format
           Appending 2011Q2 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 804,040 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2011Q2 data to ./data/processed/combined/airline_data.csv
--------------------------------- Processing 2011 Q3 --------------------------------------
(encoding automatically selected: UTF-8)
(15 vars, 5,931,080 obs)
(269,491 observations deleted)
(318,335 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000043 saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       162,536
        from master                   162,536  
        from using                          0  

    Matched                         5,180,718  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       159,980
        from master                   159,980  
        from using                          0  

    Matched                         5,183,274  
    -----------------------------------------
(903,964 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,439,290  
    -----------------------------------------
(0 real changes made)
(4,439,290 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,439,290  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 3,946,241    244,046 | 4,190,287 
         1 |   244,997      4,006 |   249,003 
-----------+----------------------+----------
     Total | 4,191,238    248,052 | 4,439,290 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,439,290  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        31,406
        from master                    31,406  
        from using                          0  

    Matched                         4,407,884  
    -----------------------------------------
(0 real changes made)
(4,439,290 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        30,306
        from master                    30,306  
        from using                          0  

    Matched                         4,408,984  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        38,959
        from master                    38,959  
        from using                          0  

    Matched                         4,400,331  
    -----------------------------------------
(38,959 real changes made)
(4,439,290 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        38,684
        from master                    38,684  
        from using                          0  

    Matched                         4,400,606  
    -----------------------------------------
(38,684 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 2,106,335  1,018,655 | 3,124,990 
         1 | 1,020,819    293,481 | 1,314,300 
-----------+----------------------+----------
     Total | 3,127,154  1,312,136 | 4,439,290 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(4,408,613 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000045 saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            30,677  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     30,677    .1330468     .324779          0          1
destinatio~b |     30,677    .1323037    .3239607          0          1
origin_slo~d |     30,677     .026233    .1367195          0          1
destinatio~d |     30,677    .0256121     .134965          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 30677
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(14,257 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(13,994 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(14,257 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(9,148 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(4,858 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(340 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(203 missing values generated)
(203 missing values generated)
(203 missing values generated)
(203 missing values generated)
(203 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000046 not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000046 saved as .dta format
           Appending 2011Q3 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 834,582 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2011Q3 data to ./data/processed/combined/airline_data.csv
--------------------------------- Processing 2011 Q4 --------------------------------------
(encoding automatically selected: ISO-8859-1)
(15 vars, 5,750,599 obs)
(236,914 observations deleted)
(286,601 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000048 saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       152,223
        from master                   152,223  
        from using                          0  

    Matched                         5,074,861  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       151,471
        from master                   151,471  
        from using                          0  

    Matched                         5,075,613  
    -----------------------------------------
(874,188 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,352,896  
    -----------------------------------------
(0 real changes made)
(4,352,896 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,352,896  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 3,859,901    244,399 | 4,104,300 
         1 |   244,710      3,886 |   248,596 
-----------+----------------------+----------
     Total | 4,104,611    248,285 | 4,352,896 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,352,896  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        34,152
        from master                    34,152  
        from using                          0  

    Matched                         4,318,744  
    -----------------------------------------
(0 real changes made)
(4,352,896 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        34,215
        from master                    34,215  
        from using                          0  

    Matched                         4,318,681  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        39,406
        from master                    39,406  
        from using                          0  

    Matched                         4,313,490  
    -----------------------------------------
(39,406 real changes made)
(4,352,896 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        39,386
        from master                    39,386  
        from using                          0  

    Matched                         4,313,510  
    -----------------------------------------
(39,386 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 2,030,180  1,014,807 | 3,044,987 
         1 | 1,018,310    289,599 | 1,307,909 
-----------+----------------------+----------
     Total | 3,048,490  1,304,406 | 4,352,896 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(4,323,406 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00004a saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            29,490  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     29,490     .134894    .3266987          0          1
destinatio~b |     29,490    .1345946    .3262943          0          1
origin_slo~d |     29,490    .0265588    .1372131          0          1
destinatio~d |     29,490    .0257838    .1347703          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 29490
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(13,628 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(13,530 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(13,628 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(8,860 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(4,683 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(324 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(200 missing values generated)
(200 missing values generated)
(200 missing values generated)
(200 missing values generated)
(200 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00004b not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00004b saved as .dta format
           Appending 2011Q4 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 865,056 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2011Q4 data to ./data/processed/combined/airline_data.csv
(25 observations deleted)
--------------------------------- Processing 2012 Q1 --------------------------------------
(encoding automatically selected: UTF-8)
(15 vars, 5,307,048 obs)
(179,695 observations deleted)
(274,497 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00004d saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       152,676
        from master                   152,676  
        from using                          0  

    Matched                         4,700,180  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       151,018
        from master                   151,018  
        from using                          0  

    Matched                         4,701,838  
    -----------------------------------------
(859,010 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,993,846  
    -----------------------------------------
(0 real changes made)
(3,993,846 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,993,846  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 3,564,114    213,683 | 3,777,797 
         1 |   212,389      3,660 |   216,049 
-----------+----------------------+----------
     Total | 3,776,503    217,343 | 3,993,846 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         3,993,846  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        38,106
        from master                    38,106  
        from using                          0  

    Matched                         3,955,740  
    -----------------------------------------
(0 real changes made)
(3,993,846 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        36,633
        from master                    36,633  
        from using                          0  

    Matched                         3,957,213  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        36,778
        from master                    36,778  
        from using                          0  

    Matched                         3,957,068  
    -----------------------------------------
(36,778 real changes made)
(3,993,846 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        36,714
        from master                    36,714  
        from using                          0  

    Matched                         3,957,132  
    -----------------------------------------
(36,714 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 1,858,356    932,417 | 2,790,773 
         1 |   934,144    268,929 | 1,203,073 
-----------+----------------------+----------
     Total | 2,792,500  1,201,346 | 3,993,846 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(3,969,540 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00004f saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            24,306  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     24,306    .1432956    .3352895          0          1
destinatio~b |     24,306    .1425255    .3345788          0          1
origin_slo~d |     24,306    .0281924    .1430733          0          1
destinatio~d |     24,306    .0277168    .1416113          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 24306
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(10,419 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(11,695 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(9,029 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(8,632 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(4,470 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(327 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(219 missing values generated)
(219 missing values generated)
(219 missing values generated)
(219 missing values generated)
(219 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00004g not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00004g saved as .dta format
           Appending 2012Q1 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 894,346 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2012Q1 data to ./data/processed/combined/airline_data.csv
--------------------------------- Processing 2012 Q2 --------------------------------------
(encoding automatically selected: UTF-8)
(15 vars, 5,879,839 obs)
(214,263 observations deleted)
(299,318 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00004i saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       168,078
        from master                   168,078  
        from using                          0  

    Matched                         5,198,180  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       168,292
        from master                   168,292  
        from using                          0  

    Matched                         5,197,966  
    -----------------------------------------
(899,904 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,466,354  
    -----------------------------------------
(0 real changes made)
(4,466,354 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,466,354  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 3,962,589    249,871 | 4,212,460 
         1 |   250,154      3,740 |   253,894 
-----------+----------------------+----------
     Total | 4,212,743    253,611 | 4,466,354 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,466,354  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        36,944
        from master                    36,944  
        from using                          0  

    Matched                         4,429,410  
    -----------------------------------------
(0 real changes made)
(4,466,354 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        36,403
        from master                    36,403  
        from using                          0  

    Matched                         4,429,951  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        42,175
        from master                    42,175  
        from using                          0  

    Matched                         4,424,179  
    -----------------------------------------
(42,175 real changes made)
(4,466,354 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        42,538
        from master                    42,538  
        from using                          0  

    Matched                         4,423,816  
    -----------------------------------------
(42,538 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 2,080,348  1,043,090 | 3,123,438 
         1 | 1,044,301    298,615 | 1,342,916 
-----------+----------------------+----------
     Total | 3,124,649  1,341,705 | 4,466,354 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(4,440,076 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00004k saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            26,278  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     26,278    .1405486    .3326459          0          1
destinatio~b |     26,278    .1399842    .3321494          0          1
origin_slo~d |     26,278    .0284304    .1437281          0          1
destinatio~d |     26,278    .0272261    .1401544          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 26278
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(11,187 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(12,714 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(9,692 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(9,435 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(4,790 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(434 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(281 missing values generated)
(281 missing values generated)
(281 missing values generated)
(281 missing values generated)
(281 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00004l not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00004l saved as .dta format
           Appending 2012Q2 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 918,433 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2012Q2 data to ./data/processed/combined/airline_data.csv
--------------------------------- Processing 2012 Q3 --------------------------------------
(encoding automatically selected: UTF-8)
(15 vars, 5,736,949 obs)
(217,644 observations deleted)
(305,042 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00004n saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       161,706
        from master                   161,706  
        from using                          0  

    Matched                         5,052,557  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       159,185
        from master                   159,185  
        from using                          0  

    Matched                         5,055,078  
    -----------------------------------------
(892,298 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,321,965  
    -----------------------------------------
(0 real changes made)
(4,321,965 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,321,965  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 3,816,079    250,560 | 4,066,639 
         1 |   251,863      3,463 |   255,326 
-----------+----------------------+----------
     Total | 4,067,942    254,023 | 4,321,965 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,321,965  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        33,589
        from master                    33,589  
        from using                          0  

    Matched                         4,288,376  
    -----------------------------------------
(0 real changes made)
(4,321,965 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        32,691
        from master                    32,691  
        from using                          0  

    Matched                         4,289,274  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        38,313
        from master                    38,313  
        from using                          0  

    Matched                         4,283,652  
    -----------------------------------------
(38,313 real changes made)
(4,321,965 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        38,248
        from master                    38,248  
        from using                          0  

    Matched                         4,283,717  
    -----------------------------------------
(38,248 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 2,014,346  1,005,610 | 3,019,956 
         1 | 1,011,226    290,783 | 1,302,009 
-----------+----------------------+----------
     Total | 3,025,572  1,296,393 | 4,321,965 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(4,295,965 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00004p saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            26,000  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     26,000    .1419779    .3339499          0          1
destinatio~b |     26,000      .14113    .3333607          0          1
origin_slo~d |     26,000    .0287792    .1442295          0          1
destinatio~d |     26,000    .0276589      .14123          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 26000
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(10,976 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(12,667 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(9,639 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(9,400 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(4,619 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(429 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(253 missing values generated)
(253 missing values generated)
(253 missing values generated)
(253 missing values generated)
(253 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00004q not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00004q saved as .dta format
           Appending 2012Q3 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 944,430 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2012Q3 data to ./data/processed/combined/airline_data.csv
--------------------------------- Processing 2012 Q4 --------------------------------------
(encoding automatically selected: UTF-8)
(15 vars, 5,780,006 obs)
(203,200 observations deleted)
(294,682 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00004s saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       162,713
        from master                   162,713  
        from using                          0  

    Matched                         5,119,411  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       162,608
        from master                   162,608  
        from using                          0  

    Matched                         5,119,516  
    -----------------------------------------
(863,517 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,418,607  
    -----------------------------------------
(0 real changes made)
(4,418,607 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,418,607  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 3,878,933    267,698 | 4,146,631 
         1 |   268,211      3,765 |   271,976 
-----------+----------------------+----------
     Total | 4,147,144    271,463 | 4,418,607 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,418,607  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        37,049
        from master                    37,049  
        from using                          0  

    Matched                         4,381,558  
    -----------------------------------------
(0 real changes made)
(4,418,607 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        37,195
        from master                    37,195  
        from using                          0  

    Matched                         4,381,412  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        40,999
        from master                    40,999  
        from using                          0  

    Matched                         4,377,608  
    -----------------------------------------
(40,999 real changes made)
(4,418,607 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        41,045
        from master                    41,045  
        from using                          0  

    Matched                         4,377,562  
    -----------------------------------------
(41,045 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 2,020,942  1,049,071 | 3,070,013 
         1 | 1,053,355    295,239 | 1,348,594 
-----------+----------------------+----------
     Total | 3,074,297  1,344,310 | 4,418,607 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(4,393,284 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00004u saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            25,323  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     25,323    .1419691     .334459          0          1
destinatio~b |     25,323    .1417082    .3342646          0          1
origin_slo~d |     25,323    .0280958    .1427692          0          1
destinatio~d |     25,323    .0278277    .1420157          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 25323
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(10,694 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(12,423 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(9,392 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(9,164 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(4,578 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(477 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(245 missing values generated)
(245 missing values generated)
(245 missing values generated)
(245 missing values generated)
(245 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00004v not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00004v saved as .dta format
           Appending 2012Q4 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 970,177 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2012Q4 data to ./data/processed/combined/airline_data.csv
(25 observations deleted)
--------------------------------- Processing 2013 Q1 --------------------------------------
(encoding automatically selected: ISO-8859-1)
(15 vars, 5,259,289 obs)
(189,284 observations deleted)
(253,594 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00004x saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       165,993
        from master                   165,993  
        from using                          0  

    Matched                         4,650,418  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       164,417
        from master                   164,417  
        from using                          0  

    Matched                         4,651,994  
    -----------------------------------------
(808,839 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,007,572  
    -----------------------------------------
(0 real changes made)
(4,007,572 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,007,572  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 3,525,760    239,021 | 3,764,781 
         1 |   239,488      3,303 |   242,791 
-----------+----------------------+----------
     Total | 3,765,248    242,324 | 4,007,572 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,007,572  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        41,175
        from master                    41,175  
        from using                          0  

    Matched                         3,966,397  
    -----------------------------------------
(0 real changes made)
(4,007,572 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        40,233
        from master                    40,233  
        from using                          0  

    Matched                         3,967,339  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        39,612
        from master                    39,612  
        from using                          0  

    Matched                         3,967,960  
    -----------------------------------------
(39,612 real changes made)
(4,007,572 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        39,246
        from master                    39,246  
        from using                          0  

    Matched                         3,968,326  
    -----------------------------------------
(39,246 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 1,851,787    940,944 | 2,792,731 
         1 |   943,549    271,292 | 1,214,841 
-----------+----------------------+----------
     Total | 2,795,336  1,212,236 | 4,007,572 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(3,983,550 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000051 saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            24,022  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     24,022    .1441656    .3368439          0          1
destinatio~b |     24,022    .1428844    .3356197          0          1
origin_slo~d |     24,022    .0287287    .1452977          0          1
destinatio~d |     24,022    .0281716    .1438756          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 24022
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(9,895 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(12,227 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(135 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(8,855 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(8,578 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(4,357 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(472 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(257 missing values generated)
(257 missing values generated)
(257 missing values generated)
(257 missing values generated)
(257 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000052 not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000052 saved as .dta format
           Appending 2013Q1 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 995,255 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2013Q1 data to ./data/processed/combined/airline_data.csv
--------------------------------- Processing 2013 Q2 --------------------------------------
(encoding automatically selected: ISO-8859-1)
(15 vars, 6,029,125 obs)
(223,848 observations deleted)
(289,636 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000054 saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       182,670
        from master                   182,670  
        from using                          0  

    Matched                         5,332,971  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       182,778
        from master                   182,778  
        from using                          0  

    Matched                         5,332,863  
    -----------------------------------------
(896,463 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,619,178  
    -----------------------------------------
(0 real changes made)
(4,619,178 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,619,178  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 4,069,408    273,570 | 4,342,978 
         1 |   272,592      3,608 |   276,200 
-----------+----------------------+----------
     Total | 4,342,000    277,178 | 4,619,178 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,619,178  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        39,575
        from master                    39,575  
        from using                          0  

    Matched                         4,579,603  
    -----------------------------------------
(0 real changes made)
(4,619,178 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        39,020
        from master                    39,020  
        from using                          0  

    Matched                         4,580,158  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        46,096
        from master                    46,096  
        from using                          0  

    Matched                         4,573,082  
    -----------------------------------------
(46,096 real changes made)
(4,619,178 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        46,144
        from master                    46,144  
        from using                          0  

    Matched                         4,573,034  
    -----------------------------------------
(46,144 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 2,119,212  1,090,088 | 3,209,300 
         1 | 1,092,690    317,188 | 1,409,878 
-----------+----------------------+----------
     Total | 3,211,902  1,407,276 | 4,619,178 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(4,592,232 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000056 saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            26,946  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     26,946    .1410527    .3339628          0          1
destinatio~b |     26,946    .1399692    .3328375          0          1
origin_slo~d |     26,946    .0283787     .144651          0          1
destinatio~d |     26,946    .0272259    .1407762          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 26946
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(10,858 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(13,903 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(160 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(9,755 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(9,464 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(5,140 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(544 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(325 missing values generated)
(325 missing values generated)
(325 missing values generated)
(325 missing values generated)
(325 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000057 not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000057 saved as .dta format
           Appending 2013Q2 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 1,019,020 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2013Q2 data to ./data/processed/combined/airline_data.csv
--------------------------------- Processing 2013 Q3 --------------------------------------
(encoding automatically selected: ISO-8859-1)
(15 vars, 5,815,426 obs)
(211,237 observations deleted)
(316,532 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000059 saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       177,314
        from master                   177,314  
        from using                          0  

    Matched                         5,110,343  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       174,008
        from master                   174,008  
        from using                          0  

    Matched                         5,113,649  
    -----------------------------------------
(915,357 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,372,300  
    -----------------------------------------
(0 real changes made)
(4,372,300 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,372,300  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 3,835,730    265,756 | 4,101,486 
         1 |   267,189      3,625 |   270,814 
-----------+----------------------+----------
     Total | 4,102,919    269,381 | 4,372,300 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,372,300  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        35,362
        from master                    35,362  
        from using                          0  

    Matched                         4,336,938  
    -----------------------------------------
(0 real changes made)
(4,372,300 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        34,181
        from master                    34,181  
        from using                          0  

    Matched                         4,338,119  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        42,071
        from master                    42,071  
        from using                          0  

    Matched                         4,330,229  
    -----------------------------------------
(42,071 real changes made)
(4,372,300 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        42,052
        from master                    42,052  
        from using                          0  

    Matched                         4,330,248  
    -----------------------------------------
(42,052 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 2,043,799  1,015,269 | 3,059,068 
         1 | 1,018,922    294,310 | 1,313,232 
-----------+----------------------+----------
     Total | 3,062,721  1,309,579 | 4,372,300 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(4,345,545 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00005b saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            26,755  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     26,755    .1423967    .3352106          0          1
destinatio~b |     26,755    .1416978    .3343239          0          1
origin_slo~d |     26,755    .0282451    .1431613          0          1
destinatio~d |     26,755    .0278106    .1415519          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 26755
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(10,821 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(13,747 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(152 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(9,727 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(9,308 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(5,154 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(519 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(287 missing values generated)
(287 missing values generated)
(287 missing values generated)
(287 missing values generated)
(287 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00005c not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00005c saved as .dta format
           Appending 2013Q3 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 1,045,641 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2013Q3 data to ./data/processed/combined/airline_data.csv
--------------------------------- Processing 2013 Q4 --------------------------------------
(encoding automatically selected: ISO-8859-1)
(15 vars, 5,743,523 obs)
(198,754 observations deleted)
(307,025 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00005e saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       159,191
        from master                   159,191  
        from using                          0  

    Matched                         5,078,553  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       159,832
        from master                   159,832  
        from using                          0  

    Matched                         5,077,912  
    -----------------------------------------
(886,563 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,351,181  
    -----------------------------------------
(0 real changes made)
(4,351,181 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,351,181  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 3,817,813    263,766 | 4,081,579 
         1 |   265,762      3,840 |   269,602 
-----------+----------------------+----------
     Total | 4,083,575    267,606 | 4,351,181 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,351,181  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        37,609
        from master                    37,609  
        from using                          0  

    Matched                         4,313,572  
    -----------------------------------------
(0 real changes made)
(4,351,181 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        37,563
        from master                    37,563  
        from using                          0  

    Matched                         4,313,618  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        38,665
        from master                    38,665  
        from using                          0  

    Matched                         4,312,516  
    -----------------------------------------
(38,665 real changes made)
(4,351,181 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        38,976
        from master                    38,976  
        from using                          0  

    Matched                         4,312,205  
    -----------------------------------------
(38,976 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 2,006,638  1,020,280 | 3,026,918 
         1 | 1,027,803    296,460 | 1,324,263 
-----------+----------------------+----------
     Total | 3,034,441  1,316,740 | 4,351,181 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(4,324,973 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00005g saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            26,208  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     26,208    .1421923     .335142          0          1
destinatio~b |     26,208    .1410283    .3337171          0          1
origin_slo~d |     26,208    .0284526    .1443619          0          1
destinatio~d |     26,208    .0275503      .14107          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 26208
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(10,489 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(13,507 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(135 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(9,491 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(9,120 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(5,029 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(515 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(334 missing values generated)
(334 missing values generated)
(334 missing values generated)
(334 missing values generated)
(334 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00005h not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00005h saved as .dta format
           Appending 2013Q4 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 1,072,109 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2013Q4 data to ./data/processed/combined/airline_data.csv
(25 observations deleted)
--------------------------------- Processing 2014 Q1 --------------------------------------
(encoding automatically selected: UTF-8)
(15 vars, 5,421,606 obs)
(215,030 observations deleted)
(273,665 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00005j saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       158,684
        from master                   158,684  
        from using                          0  

    Matched                         4,774,227  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       155,894
        from master                   155,894  
        from using                          0  

    Matched                         4,777,017  
    -----------------------------------------
(848,777 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,084,134  
    -----------------------------------------
(0 real changes made)
(4,084,134 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,084,134  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 3,600,307    240,744 | 3,841,051 
         1 |   239,441      3,642 |   243,083 
-----------+----------------------+----------
     Total | 3,839,748    244,386 | 4,084,134 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,084,134  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        41,436
        from master                    41,436  
        from using                          0  

    Matched                         4,042,698  
    -----------------------------------------
(0 real changes made)
(4,084,134 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        39,238
        from master                    39,238  
        from using                          0  

    Matched                         4,044,896  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        35,610
        from master                    35,610  
        from using                          0  

    Matched                         4,048,524  
    -----------------------------------------
(35,610 real changes made)
(4,084,134 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        35,680
        from master                    35,680  
        from using                          0  

    Matched                         4,048,454  
    -----------------------------------------
(35,680 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 1,872,651    961,284 | 2,833,935 
         1 |   966,432    283,767 | 1,250,199 
-----------+----------------------+----------
     Total | 2,839,083  1,245,051 | 4,084,134 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(4,058,719 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00005l saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            25,415  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     25,415    .1455653    .3385464          0          1
destinatio~b |     25,415    .1448389    .3376217          0          1
origin_slo~d |     25,415    .0297949     .147869          0          1
destinatio~d |     25,415    .0293208    .1459226          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 25415
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(10,602 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(12,965 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(9,555 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(8,791 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(4,741 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(477 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(320 missing values generated)
(320 missing values generated)
(320 missing values generated)
(320 missing values generated)
(320 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00005m not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00005m saved as .dta format
           Appending 2014Q1 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 1,097,983 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2014Q1 data to ./data/processed/combined/airline_data.csv
--------------------------------- Processing 2014 Q2 --------------------------------------
(encoding automatically selected: UTF-8)
(15 vars, 6,295,145 obs)
(244,724 observations deleted)
(304,786 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00005o saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       176,919
        from master                   176,919  
        from using                          0  

    Matched                         5,568,716  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       175,944
        from master                   175,944  
        from using                          0  

    Matched                         5,569,691  
    -----------------------------------------
(929,878 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,815,757  
    -----------------------------------------
(0 real changes made)
(4,815,757 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,815,757  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 4,191,952    309,319 | 4,501,271 
         1 |   309,517      4,969 |   314,486 
-----------+----------------------+----------
     Total | 4,501,469    314,288 | 4,815,757 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,815,757  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        39,442
        from master                    39,442  
        from using                          0  

    Matched                         4,776,315  
    -----------------------------------------
(0 real changes made)
(4,815,757 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        38,136
        from master                    38,136  
        from using                          0  

    Matched                         4,777,621  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        42,309
        from master                    42,309  
        from using                          0  

    Matched                         4,773,448  
    -----------------------------------------
(42,309 real changes made)
(4,815,757 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        42,335
        from master                    42,335  
        from using                          0  

    Matched                         4,773,422  
    -----------------------------------------
(42,335 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 2,196,525  1,138,298 | 3,334,823 
         1 | 1,143,674    337,260 | 1,480,934 
-----------+----------------------+----------
     Total | 3,340,199  1,475,558 | 4,815,757 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(4,788,196 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00005q saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            27,561  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     27,561    .1421947    .3352335          0          1
destinatio~b |     27,561     .142073    .3348684          0          1
origin_slo~d |     27,561    .0300855    .1490258          0          1
destinatio~d |     27,561    .0300147    .1485187          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 27561
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(11,656 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(14,052 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(10,481 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(9,478 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(5,179 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(567 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(353 missing values generated)
(353 missing values generated)
(353 missing values generated)
(353 missing values generated)
(353 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00005r not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00005r saved as .dta format
           Appending 2014Q2 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 1,123,078 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2014Q2 data to ./data/processed/combined/airline_data.csv
--------------------------------- Processing 2014 Q3 --------------------------------------
(encoding automatically selected: ISO-8859-1)
(15 vars, 6,380,810 obs)
(231,049 observations deleted)
(352,887 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00005t saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       182,263
        from master                   182,263  
        from using                          0  

    Matched                         5,614,611  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       177,703
        from master                   177,703  
        from using                          0  

    Matched                         5,619,171  
    -----------------------------------------
(958,541 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,838,333  
    -----------------------------------------
(0 real changes made)
(4,838,333 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,838,333  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 4,229,423    301,488 | 4,530,911 
         1 |   302,745      4,677 |   307,422 
-----------+----------------------+----------
     Total | 4,532,168    306,165 | 4,838,333 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,838,333  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        38,873
        from master                    38,873  
        from using                          0  

    Matched                         4,799,460  
    -----------------------------------------
(0 real changes made)
(4,838,333 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        36,667
        from master                    36,667  
        from using                          0  

    Matched                         4,801,666  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        40,451
        from master                    40,451  
        from using                          0  

    Matched                         4,797,882  
    -----------------------------------------
(40,451 real changes made)
(4,838,333 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        40,288
        from master                    40,288  
        from using                          0  

    Matched                         4,798,045  
    -----------------------------------------
(40,288 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 2,230,098  1,135,947 | 3,366,045 
         1 | 1,138,536    333,752 | 1,472,288 
-----------+----------------------+----------
     Total | 3,368,634  1,469,699 | 4,838,333 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(4,811,151 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00005v saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            27,182  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     27,182    .1449833    .3376854          0          1
destinatio~b |     27,182    .1450935    .3376464          0          1
origin_slo~d |     27,182    .0306196    .1497929          0          1
destinatio~d |     27,182    .0297188    .1471035          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 27182
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(11,617 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(13,975 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(10,380 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(9,449 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(5,159 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(582 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(321 missing values generated)
(321 missing values generated)
(321 missing values generated)
(321 missing values generated)
(321 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00005w not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00005w saved as .dta format
           Appending 2014Q3 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 1,150,286 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2014Q3 data to ./data/processed/combined/airline_data.csv
--------------------------------- Processing 2014 Q4 --------------------------------------
(encoding automatically selected: ISO-8859-1)
(15 vars, 6,275,151 obs)
(216,411 observations deleted)
(326,625 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000060 saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       170,654
        from master                   170,654  
        from using                          0  

    Matched                         5,561,461  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       170,196
        from master                   170,196  
        from using                          0  

    Matched                         5,561,919  
    -----------------------------------------
(933,356 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,798,759  
    -----------------------------------------
(0 real changes made)
(4,798,759 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,798,759  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 4,193,982    299,144 | 4,493,126 
         1 |   300,552      5,081 |   305,633 
-----------+----------------------+----------
     Total | 4,494,534    304,225 | 4,798,759 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,798,759  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        39,929
        from master                    39,929  
        from using                          0  

    Matched                         4,758,830  
    -----------------------------------------
(0 real changes made)
(4,798,759 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        39,662
        from master                    39,662  
        from using                          0  

    Matched                         4,759,097  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        41,375
        from master                    41,375  
        from using                          0  

    Matched                         4,757,384  
    -----------------------------------------
(41,375 real changes made)
(4,798,759 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        41,432
        from master                    41,432  
        from using                          0  

    Matched                         4,757,327  
    -----------------------------------------
(41,432 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 2,184,844  1,136,449 | 3,321,293 
         1 | 1,145,406    332,060 | 1,477,466 
-----------+----------------------+----------
     Total | 3,330,250  1,468,509 | 4,798,759 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(4,772,728 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000062 saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            26,031  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     26,031    .1463716    .3386716          0          1
destinatio~b |     26,031    .1444441    .3365755          0          1
origin_slo~d |     26,031     .030249    .1482226          0          1
destinatio~d |     26,031    .0291004    .1447741          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 26031
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(11,272 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(13,642 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(10,054 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(9,195 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(5,045 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(595 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(349 missing values generated)
(349 missing values generated)
(349 missing values generated)
(349 missing values generated)
(349 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000063 not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000063 saved as .dta format
           Appending 2014Q4 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 1,177,147 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2014Q4 data to ./data/processed/combined/airline_data.csv
(25 observations deleted)
--------------------------------- Processing 2015 Q1 --------------------------------------
(encoding automatically selected: UTF-8)
(15 vars, 5,582,629 obs)
(237,573 observations deleted)
(268,028 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000065 saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       170,388
        from master                   170,388  
        from using                          0  

    Matched                         4,906,640  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       166,269
        from master                   166,269  
        from using                          0  

    Matched                         4,910,759  
    -----------------------------------------
(865,328 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,211,700  
    -----------------------------------------
(0 real changes made)
(4,211,700 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,211,700  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 3,700,938    254,037 | 3,954,975 
         1 |   252,433      4,292 |   256,725 
-----------+----------------------+----------
     Total | 3,953,371    258,329 | 4,211,700 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,211,700  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        45,694
        from master                    45,694  
        from using                          0  

    Matched                         4,166,006  
    -----------------------------------------
(0 real changes made)
(4,211,700 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        43,543
        from master                    43,543  
        from using                          0  

    Matched                         4,168,157  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        35,717
        from master                    35,717  
        from using                          0  

    Matched                         4,175,983  
    -----------------------------------------
(35,717 real changes made)
(4,211,700 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        35,398
        from master                    35,398  
        from using                          0  

    Matched                         4,176,302  
    -----------------------------------------
(35,398 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 1,919,356    997,851 | 2,917,207 
         1 | 1,000,992    293,501 | 1,294,493 
-----------+----------------------+----------
     Total | 2,920,348  1,291,352 | 4,211,700 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(4,187,639 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000067 saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            24,061  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     24,061    .1463542    .3380711          0          1
destinatio~b |     24,061    .1453542    .3369736          0          1
origin_slo~d |     24,061    .0293524    .1444792          0          1
destinatio~d |     24,061    .0288024    .1423693          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 24061
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(10,533 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(12,952 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(9,549 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(8,698 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(4,618 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(595 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(331 missing values generated)
(331 missing values generated)
(331 missing values generated)
(331 missing values generated)
(331 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000068 not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000068 saved as .dta format
           Appending 2015Q1 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 1,202,829 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2015Q1 data to ./data/processed/combined/airline_data.csv
--------------------------------- Processing 2015 Q2 --------------------------------------
(encoding automatically selected: ISO-8859-1)
(15 vars, 6,594,239 obs)
(312,653 observations deleted)
(305,869 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00006a saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       192,172
        from master                   192,172  
        from using                          0  

    Matched                         5,783,545  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       189,238
        from master                   189,238  
        from using                          0  

    Matched                         5,786,479  
    -----------------------------------------
(943,259 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         5,032,458  
    -----------------------------------------
(0 real changes made)
(5,032,458 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         5,032,458  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 4,379,957    323,668 | 4,703,625 
         1 |   323,054      5,779 |   328,833 
-----------+----------------------+----------
     Total | 4,703,011    329,447 | 5,032,458 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         5,032,458  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        45,476
        from master                    45,476  
        from using                          0  

    Matched                         4,986,982  
    -----------------------------------------
(0 real changes made)
(5,032,458 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        43,823
        from master                    43,823  
        from using                          0  

    Matched                         4,988,635  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        42,512
        from master                    42,512  
        from using                          0  

    Matched                         4,989,946  
    -----------------------------------------
(42,512 real changes made)
(5,032,458 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        42,262
        from master                    42,262  
        from using                          0  

    Matched                         4,990,196  
    -----------------------------------------
(42,262 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 2,297,140  1,188,986 | 3,486,126 
         1 | 1,195,701    350,631 | 1,546,332 
-----------+----------------------+----------
     Total | 3,492,841  1,539,617 | 5,032,458 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(5,005,741 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00006c saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            26,717  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     26,717    .1419618    .3335114          0          1
destinatio~b |     26,717    .1411659    .3326584          0          1
origin_slo~d |     26,717    .0293745    .1440814          0          1
destinatio~d |     26,717    .0287014     .141951          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 26717
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(11,643 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(14,380 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(10,692 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(9,670 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(4,958 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(687 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(343 missing values generated)
(343 missing values generated)
(343 missing values generated)
(343 missing values generated)
(343 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00006d not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00006d saved as .dta format
           Appending 2015Q2 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 1,226,559 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2015Q2 data to ./data/processed/combined/airline_data.csv
--------------------------------- Processing 2015 Q3 --------------------------------------
(encoding automatically selected: UTF-8)
(15 vars, 6,438,733 obs)
(196,740 observations deleted)
(332,020 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00006f saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       188,550
        from master                   188,550  
        from using                          0  

    Matched                         5,721,423  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       184,600
        from master                   184,600  
        from using                          0  

    Matched                         5,725,373  
    -----------------------------------------
(959,424 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,950,549  
    -----------------------------------------
(0 real changes made)
(4,950,549 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,950,549  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 4,326,801    308,629 | 4,635,430 
         1 |   310,334      4,785 |   315,119 
-----------+----------------------+----------
     Total | 4,637,135    313,414 | 4,950,549 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,950,549  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        41,108
        from master                    41,108  
        from using                          0  

    Matched                         4,909,441  
    -----------------------------------------
(0 real changes made)
(4,950,549 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        39,628
        from master                    39,628  
        from using                          0  

    Matched                         4,910,921  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        39,348
        from master                    39,348  
        from using                          0  

    Matched                         4,911,201  
    -----------------------------------------
(39,348 real changes made)
(4,950,549 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        39,334
        from master                    39,334  
        from using                          0  

    Matched                         4,911,215  
    -----------------------------------------
(39,334 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 2,220,450  1,172,199 | 3,392,649 
         1 | 1,181,707    376,193 | 1,557,900 
-----------+----------------------+----------
     Total | 3,402,157  1,548,392 | 4,950,549 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(4,928,381 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00006h saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            22,168  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     22,168    .1534923    .3443852          0          1
destinatio~b |     22,168    .1522493    .3432196          0          1
origin_slo~d |     22,168    .0273826    .1379354          0          1
destinatio~d |     22,168    .0268889    .1362762          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 22168
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(11,744 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(9,709 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(10,974 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(4,978 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(4,800 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(662 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(374 missing values generated)
(374 missing values generated)
(374 missing values generated)
(374 missing values generated)
(374 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00006i not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00006i saved as .dta format
           Appending 2015Q3 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 1,252,933 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2015Q3 data to ./data/processed/combined/airline_data.csv
--------------------------------- Processing 2015 Q4 --------------------------------------
(encoding automatically selected: ISO-8859-1)
(15 vars, 6,408,010 obs)
(175,339 observations deleted)
(327,245 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00006k saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       180,643
        from master                   180,643  
        from using                          0  

    Matched                         5,724,783  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       181,638
        from master                   181,638  
        from using                          0  

    Matched                         5,723,788  
    -----------------------------------------
(890,435 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         5,014,991  
    -----------------------------------------
(0 real changes made)
(5,014,991 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         5,014,991  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 4,383,503    311,572 | 4,695,075 
         1 |   314,958      4,958 |   319,916 
-----------+----------------------+----------
     Total | 4,698,461    316,530 | 5,014,991 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         5,014,991  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        42,739
        from master                    42,739  
        from using                          0  

    Matched                         4,972,252  
    -----------------------------------------
(0 real changes made)
(5,014,991 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        43,413
        from master                    43,413  
        from using                          0  

    Matched                         4,971,578  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        42,885
        from master                    42,885  
        from using                          0  

    Matched                         4,972,106  
    -----------------------------------------
(42,885 real changes made)
(5,014,991 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        43,240
        from master                    43,240  
        from using                          0  

    Matched                         4,971,751  
    -----------------------------------------
(43,240 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 2,217,593  1,202,102 | 3,419,695 
         1 | 1,213,769    381,527 | 1,595,296 
-----------+----------------------+----------
     Total | 3,431,362  1,583,629 | 5,014,991 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(4,993,345 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00006m saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            21,646  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     21,646    .1544892    .3456558          0          1
destinatio~b |     21,646    .1537015    .3450839          0          1
origin_slo~d |     21,646    .0271209    .1374613          0          1
destinatio~d |     21,646    .0266898    .1360026          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 21646
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(11,461 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(9,534 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(10,654 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(4,793 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(4,797 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(687 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(383 missing values generated)
(383 missing values generated)
(383 missing values generated)
(383 missing values generated)
(383 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00006n not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00006n saved as .dta format
           Appending 2015Q4 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 1,274,727 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2015Q4 data to ./data/processed/combined/airline_data.csv
(25 observations deleted)
--------------------------------- Processing 2016 Q1 --------------------------------------
(encoding automatically selected: ISO-8859-1)
(15 vars, 5,858,752 obs)
(148,826 observations deleted)
(297,714 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00006p saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       182,929
        from master                   182,929  
        from using                          0  

    Matched                         5,229,283  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       179,201
        from master                   179,201  
        from using                          0  

    Matched                         5,233,011  
    -----------------------------------------
(860,128 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,552,084  
    -----------------------------------------
(0 real changes made)
(4,552,084 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,552,084  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 3,971,311    288,760 | 4,260,071 
         1 |   287,216      4,797 |   292,013 
-----------+----------------------+----------
     Total | 4,258,527    293,557 | 4,552,084 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,552,084  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        49,616
        from master                    49,616  
        from using                          0  

    Matched                         4,502,468  
    -----------------------------------------
(0 real changes made)
(4,552,084 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        47,145
        from master                    47,145  
        from using                          0  

    Matched                         4,504,939  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        37,255
        from master                    37,255  
        from using                          0  

    Matched                         4,514,829  
    -----------------------------------------
(37,255 real changes made)
(4,552,084 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        37,165
        from master                    37,165  
        from using                          0  

    Matched                         4,514,919  
    -----------------------------------------
(37,165 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 1,948,675  1,121,186 | 3,069,861 
         1 | 1,124,990    357,233 | 1,482,223 
-----------+----------------------+----------
     Total | 3,073,665  1,478,419 | 4,552,084 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(4,531,628 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00006r saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            20,456  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     20,456    .1552632    .3471156          0          1
destinatio~b |     20,456    .1553728    .3471862          0          1
origin_slo~d |     20,456     .026992    .1382218          0          1
destinatio~d |     20,456    .0268004    .1373117          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 20456
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(10,799 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(9,002 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(9,972 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(4,478 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(4,612 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(657 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(358 missing values generated)
(358 missing values generated)
(358 missing values generated)
(358 missing values generated)
(358 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00006s not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00006s saved as .dta format
           Appending 2016Q1 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 1,295,990 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2016Q1 data to ./data/processed/combined/airline_data.csv
--------------------------------- Processing 2016 Q2 --------------------------------------
(encoding automatically selected: UTF-8)
(15 vars, 6,605,176 obs)
(163,168 observations deleted)
(332,436 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00006u saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       197,829
        from master                   197,829  
        from using                          0  

    Matched                         5,911,743  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       196,250
        from master                   196,250  
        from using                          0  

    Matched                         5,913,322  
    -----------------------------------------
(912,420 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         5,197,152  
    -----------------------------------------
(0 real changes made)
(5,197,152 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         5,197,152  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 4,524,602    333,763 | 4,858,365 
         1 |   333,263      5,524 |   338,787 
-----------+----------------------+----------
     Total | 4,857,865    339,287 | 5,197,152 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         5,197,152  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        45,133
        from master                    45,133  
        from using                          0  

    Matched                         5,152,019  
    -----------------------------------------
(0 real changes made)
(5,197,152 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        43,693
        from master                    43,693  
        from using                          0  

    Matched                         5,153,459  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        42,919
        from master                    42,919  
        from using                          0  

    Matched                         5,154,233  
    -----------------------------------------
(42,919 real changes made)
(5,197,152 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        43,093
        from master                    43,093  
        from using                          0  

    Matched                         5,154,059  
    -----------------------------------------
(43,093 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 2,265,228  1,265,581 | 3,530,809 
         1 | 1,270,714    395,629 | 1,666,343 
-----------+----------------------+----------
     Total | 3,535,942  1,661,210 | 5,197,152 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(5,174,011 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00006w saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            23,141  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     23,141    .1491455    .3411947          0          1
destinatio~b |     23,141    .1495135    .3416858          0          1
origin_slo~d |     23,141    .0272903    .1380919          0          1
destinatio~d |     23,141      .02664    .1364858          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 23141
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(12,304 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(10,026 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(11,278 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(5,002 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(5,226 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(756 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(402 missing values generated)
(402 missing values generated)
(402 missing values generated)
(402 missing values generated)
(402 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00006x not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00006x saved as .dta format
           Appending 2016Q2 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 1,316,088 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2016Q2 data to ./data/processed/combined/airline_data.csv
--------------------------------- Processing 2016 Q3 --------------------------------------
(encoding automatically selected: UTF-8)
(15 vars, 6,504,752 obs)
(177,466 observations deleted)
(363,687 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000071 saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       189,315
        from master                   189,315  
        from using                          0  

    Matched                         5,774,284  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       185,711
        from master                   185,711  
        from using                          0  

    Matched                         5,777,888  
    -----------------------------------------
(946,639 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         5,016,960  
    -----------------------------------------
(0 real changes made)
(5,016,960 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         5,016,960  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 4,380,166    314,186 | 4,694,352 
         1 |   316,891      5,717 |   322,608 
-----------+----------------------+----------
     Total | 4,697,057    319,903 | 5,016,960 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         5,016,960  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        38,610
        from master                    38,610  
        from using                          0  

    Matched                         4,978,350  
    -----------------------------------------
(0 real changes made)
(5,016,960 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        37,414
        from master                    37,414  
        from using                          0  

    Matched                         4,979,546  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        38,709
        from master                    38,709  
        from using                          0  

    Matched                         4,978,251  
    -----------------------------------------
(38,709 real changes made)
(5,016,960 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        38,459
        from master                    38,459  
        from using                          0  

    Matched                         4,978,501  
    -----------------------------------------
(38,459 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 2,167,832  1,224,546 | 3,392,378 
         1 | 1,233,904    390,678 | 1,624,582 
-----------+----------------------+----------
     Total | 3,401,736  1,615,224 | 5,016,960 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(4,993,609 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000073 saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            23,351  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     23,351    .1513309    .3430509          0          1
destinatio~b |     23,351    .1510059    .3428389          0          1
origin_slo~d |     23,351    .0270398     .137022          0          1
destinatio~d |     23,351    .0267512    .1364441          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 23351
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(12,468 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(10,063 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(11,398 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(5,098 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(5,228 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(720 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(405 missing values generated)
(405 missing values generated)
(405 missing values generated)
(405 missing values generated)
(405 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000074 not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000074 saved as .dta format
           Appending 2016Q3 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 1,338,827 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2016Q3 data to ./data/processed/combined/airline_data.csv
--------------------------------- Processing 2016 Q4 --------------------------------------
(encoding automatically selected: UTF-8)
(15 vars, 6,567,113 obs)
(149,567 observations deleted)
(358,329 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000076 saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       184,347
        from master                   184,347  
        from using                          0  

    Matched                         5,874,870  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       185,747
        from master                   185,747  
        from using                          0  

    Matched                         5,873,470  
    -----------------------------------------
(930,128 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         5,129,089  
    -----------------------------------------
(0 real changes made)
(5,129,089 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         5,129,089  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 4,474,705    322,496 | 4,797,201 
         1 |   325,062      6,826 |   331,888 
-----------+----------------------+----------
     Total | 4,799,767    329,322 | 5,129,089 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         5,129,089  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        43,285
        from master                    43,285  
        from using                          0  

    Matched                         5,085,804  
    -----------------------------------------
(0 real changes made)
(5,129,089 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        43,757
        from master                    43,757  
        from using                          0  

    Matched                         5,085,332  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        41,125
        from master                    41,125  
        from using                          0  

    Matched                         5,087,964  
    -----------------------------------------
(41,125 real changes made)
(5,129,089 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        41,881
        from master                    41,881  
        from using                          0  

    Matched                         5,087,208  
    -----------------------------------------
(41,881 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 2,164,813  1,274,985 | 3,439,798 
         1 | 1,286,422    402,869 | 1,689,291 
-----------+----------------------+----------
     Total | 3,451,235  1,677,854 | 5,129,089 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(5,106,458 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000078 saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            22,631  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     22,631    .1512464    .3431722          0          1
destinatio~b |     22,631     .150564     .342538          0          1
origin_slo~d |     22,631    .0266654    .1363264          0          1
destinatio~d |     22,631    .0268912    .1370679          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 22631
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(11,974 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(9,875 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(10,947 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(4,906 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(5,171 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(772 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(400 missing values generated)
(400 missing values generated)
(400 missing values generated)
(400 missing values generated)
(400 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000079 not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000079 saved as .dta format
           Appending 2016Q4 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 1,361,773 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2016Q4 data to ./data/processed/combined/airline_data.csv
(25 observations deleted)
--------------------------------- Processing 2017 Q1 --------------------------------------
(encoding automatically selected: UTF-8)
(15 vars, 5,866,623 obs)
(133,802 observations deleted)
(337,843 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00007b saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       183,132
        from master                   183,132  
        from using                          0  

    Matched                         5,211,846  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       179,305
        from master                   179,305  
        from using                          0  

    Matched                         5,215,673  
    -----------------------------------------
(872,664 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,522,314  
    -----------------------------------------
(0 real changes made)
(4,522,314 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,522,314  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 3,972,666    272,262 | 4,244,928 
         1 |   271,420      5,966 |   277,386 
-----------+----------------------+----------
     Total | 4,244,086    278,228 | 4,522,314 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,522,314  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        46,215
        from master                    46,215  
        from using                          0  

    Matched                         4,476,099  
    -----------------------------------------
(0 real changes made)
(4,522,314 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        44,230
        from master                    44,230  
        from using                          0  

    Matched                         4,478,084  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        38,304
        from master                    38,304  
        from using                          0  

    Matched                         4,484,010  
    -----------------------------------------
(38,304 real changes made)
(4,522,314 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        38,207
        from master                    38,207  
        from using                          0  

    Matched                         4,484,107  
    -----------------------------------------
(38,207 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 1,955,016  1,107,184 | 3,062,200 
         1 | 1,112,964    347,150 | 1,460,114 
-----------+----------------------+----------
     Total | 3,067,980  1,454,334 | 4,522,314 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(4,500,716 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00007d saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            21,598  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     21,598    .1513085    .3432457          0          1
destinatio~b |     21,598    .1510318    .3429964          0          1
origin_slo~d |     21,598    .0267856    .1377564          0          1
destinatio~d |     21,598    .0265449    .1367978          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 21598
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(12,984 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(8,442 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(10,453 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(4,678 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(4,906 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(736 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(363 missing values generated)
(363 missing values generated)
(363 missing values generated)
(363 missing values generated)
(363 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00007e not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00007e saved as .dta format
           Appending 2017Q1 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 1,384,004 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2017Q1 data to ./data/processed/combined/airline_data.csv
--------------------------------- Processing 2017 Q2 --------------------------------------
(encoding automatically selected: UTF-8)
(15 vars, 6,566,460 obs)
(154,914 observations deleted)
(350,613 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00007g saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       206,230
        from master                   206,230  
        from using                          0  

    Matched                         5,854,703  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       205,292
        from master                   205,292  
        from using                          0  

    Matched                         5,855,641  
    -----------------------------------------
(916,899 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         5,144,034  
    -----------------------------------------
(0 real changes made)
(5,144,034 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         5,144,034  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 4,510,844    312,604 | 4,823,448 
         1 |   313,714      6,872 |   320,586 
-----------+----------------------+----------
     Total | 4,824,558    319,476 | 5,144,034 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         5,144,034  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        43,453
        from master                    43,453  
        from using                          0  

    Matched                         5,100,581  
    -----------------------------------------
(0 real changes made)
(5,144,034 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        42,016
        from master                    42,016  
        from using                          0  

    Matched                         5,102,018  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        46,208
        from master                    46,208  
        from using                          0  

    Matched                         5,097,826  
    -----------------------------------------
(46,208 real changes made)
(5,144,034 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        45,605
        from master                    45,605  
        from using                          0  

    Matched                         5,098,429  
    -----------------------------------------
(45,605 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 2,239,106  1,254,584 | 3,493,690 
         1 | 1,260,149    390,195 | 1,650,344 
-----------+----------------------+----------
     Total | 3,499,255  1,644,779 | 5,144,034 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(5,120,440 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00007i saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            23,594  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     23,594    .1470331    .3396102          0          1
destinatio~b |     23,594    .1457991    .3383787          0          1
origin_slo~d |     23,594    .0265701    .1372777          0          1
destinatio~d |     23,594      .02568    .1346984          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 23594
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(14,241 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(9,137 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(11,345 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(5,024 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(5,415 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(813 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(394 missing values generated)
(394 missing values generated)
(394 missing values generated)
(394 missing values generated)
(394 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00007j not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00007j saved as .dta format
           Appending 2017Q2 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 1,405,239 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2017Q2 data to ./data/processed/combined/airline_data.csv
--------------------------------- Processing 2017 Q3 --------------------------------------
(encoding automatically selected: ISO-8859-1)
(15 vars, 6,321,204 obs)
(156,823 observations deleted)
(382,544 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00007l saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       198,706
        from master                   198,706  
        from using                          0  

    Matched                         5,583,131  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       193,258
        from master                   193,258  
        from using                          0  

    Matched                         5,588,579  
    -----------------------------------------
(933,613 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,848,224  
    -----------------------------------------
(0 real changes made)
(4,848,224 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,848,224  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 4,258,745    290,628 | 4,549,373 
         1 |   292,866      5,985 |   298,851 
-----------+----------------------+----------
     Total | 4,551,611    296,613 | 4,848,224 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,848,224  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        34,565
        from master                    34,565  
        from using                          0  

    Matched                         4,813,659  
    -----------------------------------------
(0 real changes made)
(4,848,224 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        32,309
        from master                    32,309  
        from using                          0  

    Matched                         4,815,915  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        44,012
        from master                    44,012  
        from using                          0  

    Matched                         4,804,212  
    -----------------------------------------
(44,012 real changes made)
(4,848,224 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        43,248
        from master                    43,248  
        from using                          0  

    Matched                         4,804,976  
    -----------------------------------------
(43,248 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 2,101,038  1,186,948 | 3,287,986 
         1 | 1,195,388    364,850 | 1,560,238 
-----------+----------------------+----------
     Total | 3,296,426  1,551,798 | 4,848,224 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(4,824,455 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00007n saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            23,769  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     23,769    .1476318    .3399325          0          1
destinatio~b |     23,769    .1469932    .3394091          0          1
origin_slo~d |     23,769    .0263945    .1361477          0          1
destinatio~d |     23,769    .0253127    .1325194          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 23769
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(14,410 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(9,172 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(11,462 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(5,062 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(5,456 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(802 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(396 missing values generated)
(396 missing values generated)
(396 missing values generated)
(396 missing values generated)
(396 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00007o not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00007o saved as .dta format
           Appending 2017Q3 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 1,428,439 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2017Q3 data to ./data/processed/combined/airline_data.csv
--------------------------------- Processing 2017 Q4 --------------------------------------
(encoding automatically selected: UTF-8)
(15 vars, 6,860,743 obs)
(143,385 observations deleted)
(402,971 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00007q saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       173,900
        from master                   173,900  
        from using                          0  

    Matched                         6,140,487  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       172,066
        from master                   172,066  
        from using                          0  

    Matched                         6,142,321  
    -----------------------------------------
(939,885 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         5,374,502  
    -----------------------------------------
(0 real changes made)
(5,374,502 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         5,374,502  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 4,731,531    317,526 | 5,049,057 
         1 |   319,005      6,440 |   325,445 
-----------+----------------------+----------
     Total | 5,050,536    323,966 | 5,374,502 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         5,374,502  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        25,792
        from master                    25,792  
        from using                          0  

    Matched                         5,348,710  
    -----------------------------------------
(0 real changes made)
(5,374,502 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        23,815
        from master                    23,815  
        from using                          0  

    Matched                         5,350,687  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        45,176
        from master                    45,176  
        from using                          0  

    Matched                         5,329,326  
    -----------------------------------------
(45,176 real changes made)
(5,374,502 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        46,102
        from master                    46,102  
        from using                          0  

    Matched                         5,328,400  
    -----------------------------------------
(46,102 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 2,308,973  1,328,791 | 3,637,764 
         1 | 1,334,184    402,554 | 1,736,738 
-----------+----------------------+----------
     Total | 3,643,157  1,731,345 | 5,374,502 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(5,350,735 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00007s saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            23,767  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     23,767    .1463836    .3389353          0          1
destinatio~b |     23,767    .1467602    .3391466          0          1
origin_slo~d |     23,767    .0258676    .1346688          0          1
destinatio~d |     23,767    .0253555    .1328413          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 23767
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(14,373 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(9,206 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(11,304 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(5,071 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(5,629 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(814 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(424 missing values generated)
(424 missing values generated)
(424 missing values generated)
(424 missing values generated)
(424 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00007t not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00007t saved as .dta format
           Appending 2017Q4 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 1,451,812 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2017Q4 data to ./data/processed/combined/airline_data.csv
(25 observations deleted)
--------------------------------- Processing 2018 Q1 --------------------------------------
(encoding automatically selected: ISO-8859-1)
(15 vars, 6,093,175 obs)
(126,146 observations deleted)
(366,306 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00007v saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       173,685
        from master                   173,685  
        from using                          0  

    Matched                         5,427,038  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       172,140
        from master                   172,140  
        from using                          0  

    Matched                         5,428,583  
    -----------------------------------------
(887,163 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,713,560  
    -----------------------------------------
(0 real changes made)
(4,713,560 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,713,560  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 4,172,945    266,782 | 4,439,727 
         1 |   269,043      4,790 |   273,833 
-----------+----------------------+----------
     Total | 4,441,988    271,572 | 4,713,560 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         4,713,560  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        28,143
        from master                    28,143  
        from using                          0  

    Matched                         4,685,417  
    -----------------------------------------
(0 real changes made)
(4,713,560 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        28,562
        from master                    28,562  
        from using                          0  

    Matched                         4,684,998  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        40,582
        from master                    40,582  
        from using                          0  

    Matched                         4,672,978  
    -----------------------------------------
(40,582 real changes made)
(4,713,560 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        40,325
        from master                    40,325  
        from using                          0  

    Matched                         4,673,235  
    -----------------------------------------
(40,325 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 2,049,269  1,151,054 | 3,200,323 
         1 | 1,160,388    352,849 | 1,513,237 
-----------+----------------------+----------
     Total | 3,209,657  1,503,903 | 4,713,560 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(4,691,211 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00007x saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            22,349  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     22,349    .1472895    .3399229          0          1
destinatio~b |     22,349    .1463185    .3390158          0          1
origin_slo~d |     22,349    .0255285    .1344334          0          1
destinatio~d |     22,349     .025006    .1330941          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 22349
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(12,319 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(9,855 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(10,495 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(4,689 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(5,412 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(801 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(401 missing values generated)
(401 missing values generated)
(401 missing values generated)
(401 missing values generated)
(401 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000080 not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000080 saved as .dta format
           Appending 2018Q1 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 1,475,155 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2018Q1 data to ./data/processed/combined/airline_data.csv
--------------------------------- Processing 2018 Q2 --------------------------------------
(encoding automatically selected: ISO-8859-1)
(15 vars, 7,149,085 obs)
(158,299 observations deleted)
(409,292 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000082 saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       204,161
        from master                   204,161  
        from using                          0  

    Matched                         6,377,333  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       205,009
        from master                   205,009  
        from using                          0  

    Matched                         6,376,485  
    -----------------------------------------
(972,710 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         5,608,784  
    -----------------------------------------
(0 real changes made)
(5,608,784 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         5,608,784  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 4,948,305    327,906 | 5,276,211 
         1 |   326,010      6,563 |   332,573 
-----------+----------------------+----------
     Total | 5,274,315    334,469 | 5,608,784 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         5,608,784  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        33,884
        from master                    33,884  
        from using                          0  

    Matched                         5,574,900  
    -----------------------------------------
(0 real changes made)
(5,608,784 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        33,599
        from master                    33,599  
        from using                          0  

    Matched                         5,575,185  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        47,794
        from master                    47,794  
        from using                          0  

    Matched                         5,560,990  
    -----------------------------------------
(47,794 real changes made)
(5,608,784 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        47,736
        from master                    47,736  
        from using                          0  

    Matched                         5,561,048  
    -----------------------------------------
(47,736 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 2,453,925  1,364,617 | 3,818,542 
         1 | 1,372,555    417,687 | 1,790,242 
-----------+----------------------+----------
     Total | 3,826,480  1,782,304 | 5,608,784 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(5,583,150 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000084 saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            25,634  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     25,634    .1415244    .3339664          0          1
destinatio~b |     25,634    .1402212    .3328096          0          1
origin_slo~d |     25,634     .025726    .1335941          0          1
destinatio~d |     25,634    .0249895    .1320159          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 25634
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(14,649 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(10,792 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(12,051 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(5,358 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(6,492 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(914 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(441 missing values generated)
(441 missing values generated)
(441 missing values generated)
(441 missing values generated)
(441 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000085 not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000085 saved as .dta format
           Appending 2018Q2 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 1,497,103 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2018Q2 data to ./data/processed/combined/airline_data.csv
--------------------------------- Processing 2018 Q3 --------------------------------------
(encoding automatically selected: ISO-8859-1)
(15 vars, 6,816,253 obs)
(158,028 observations deleted)
(438,454 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000087 saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       205,205
        from master                   205,205  
        from using                          0  

    Matched                         6,014,566  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       199,637
        from master                   199,637  
        from using                          0  

    Matched                         6,020,134  
    -----------------------------------------
(990,728 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         5,229,043  
    -----------------------------------------
(0 real changes made)
(5,229,043 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         5,229,043  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 4,612,655    304,441 | 4,917,096 
         1 |   306,137      5,810 |   311,947 
-----------+----------------------+----------
     Total | 4,918,792    310,251 | 5,229,043 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         5,229,043  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        35,483
        from master                    35,483  
        from using                          0  

    Matched                         5,193,560  
    -----------------------------------------
(0 real changes made)
(5,229,043 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        34,241
        from master                    34,241  
        from using                          0  

    Matched                         5,194,802  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        43,619
        from master                    43,619  
        from using                          0  

    Matched                         5,185,424  
    -----------------------------------------
(43,619 real changes made)
(5,229,043 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        43,186
        from master                    43,186  
        from using                          0  

    Matched                         5,185,857  
    -----------------------------------------
(43,186 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 2,269,238  1,277,263 | 3,546,501 
         1 | 1,288,264    394,278 | 1,682,542 
-----------+----------------------+----------
     Total | 3,557,502  1,671,541 | 5,229,043 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(5,203,328 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000089 saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            25,715  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     25,715    .1418123    .3346066          0          1
destinatio~b |     25,715    .1414485    .3341667          0          1
origin_slo~d |     25,715    .0247683    .1311307          0          1
destinatio~d |     25,715    .0245549    .1307903          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 25715
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(14,790 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(10,746 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(12,053 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(5,351 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(6,611 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(929 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(414 missing values generated)
(414 missing values generated)
(414 missing values generated)
(414 missing values generated)
(414 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00008a not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00008a saved as .dta format
           Appending 2018Q3 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 1,522,296 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2018Q3 data to ./data/processed/combined/airline_data.csv
--------------------------------- Processing 2018 Q4 --------------------------------------
(encoding automatically selected: ISO-8859-1)
(15 vars, 7,176,258 obs)
(141,816 observations deleted)
(444,031 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00008c saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       193,309
        from master                   193,309  
        from using                          0  

    Matched                         6,397,102  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       195,476
        from master                   195,476  
        from using                          0  

    Matched                         6,394,935  
    -----------------------------------------
(988,721 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         5,601,690  
    -----------------------------------------
(0 real changes made)
(5,601,690 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         5,601,690  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 4,936,022    328,159 | 5,264,181 
         1 |   330,647      6,862 |   337,509 
-----------+----------------------+----------
     Total | 5,266,669    335,021 | 5,601,690 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         5,601,690  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        39,755
        from master                    39,755  
        from using                          0  

    Matched                         5,561,935  
    -----------------------------------------
(0 real changes made)
(5,601,690 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        40,912
        from master                    40,912  
        from using                          0  

    Matched                         5,560,778  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        45,765
        from master                    45,765  
        from using                          0  

    Matched                         5,555,925  
    -----------------------------------------
(45,765 real changes made)
(5,601,690 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        46,244
        from master                    46,244  
        from using                          0  

    Matched                         5,555,446  
    -----------------------------------------
(46,244 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 2,428,257  1,374,552 | 3,802,809 
         1 | 1,382,456    416,425 | 1,798,881 
-----------+----------------------+----------
     Total | 3,810,713  1,790,977 | 5,601,690 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(5,576,186 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00008e saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            25,504  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     25,504    .1422391    .3350441          0          1
destinatio~b |     25,504    .1419269    .3348809          0          1
origin_slo~d |     25,504    .0253815    .1337647          0          1
destinatio~d |     25,504    .0241163    .1302106          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 25504
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(0 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(14,581 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(10,670 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(11,868 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(5,299 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(6,632 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(1,012 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(427 missing values generated)
(427 missing values generated)
(427 missing values generated)
(427 missing values generated)
(427 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00008f not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00008f saved as .dta format
           Appending 2018Q4 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 1,547,597 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2018Q4 data to ./data/processed/combined/airline_data.csv
(25 observations deleted)
--------------------------------- Processing 2019 Q1 --------------------------------------
(encoding automatically selected: ISO-8859-1)
(15 vars, 6,508,753 obs)
(119,818 observations deleted)
(391,341 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00008h saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       195,857
        from master                   195,857  
        from using                          0  

    Matched                         5,801,737  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       192,281
        from master                   192,281  
        from using                          0  

    Matched                         5,805,313  
    -----------------------------------------
(944,690 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         5,052,904  
    -----------------------------------------
(0 real changes made)
(5,052,904 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         5,052,904  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 4,489,702    279,841 | 4,769,543 
         1 |   278,007      5,354 |   283,361 
-----------+----------------------+----------
     Total | 4,767,709    285,195 | 5,052,904 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         5,052,904  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        45,917
        from master                    45,917  
        from using                          0  

    Matched                         5,006,987  
    -----------------------------------------
(0 real changes made)
(5,052,904 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        44,556
        from master                    44,556  
        from using                          0  

    Matched                         5,008,348  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        43,325
        from master                    43,325  
        from using                          0  

    Matched                         5,009,579  
    -----------------------------------------
(43,325 real changes made)
(5,052,904 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        41,984
        from master                    41,984  
        from using                          0  

    Matched                         5,010,920  
    -----------------------------------------
(41,984 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 2,221,855  1,225,951 | 3,447,806 
         1 | 1,235,432    369,666 | 1,605,098 
-----------+----------------------+----------
     Total | 3,457,287  1,595,617 | 5,052,904 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(5,028,782 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00008j saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            24,122  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     24,122    .1440341    .3369991          0          1
destinatio~b |     24,122    .1429491    .3359468          0          1
origin_slo~d |     24,122    .0238949    .1296358          0          1
destinatio~d |     24,122    .0238237     .130096          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 24122
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(13,714 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(10,185 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(11,335 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(5,018 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(6,012 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(1,046 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(428 missing values generated)
(428 missing values generated)
(428 missing values generated)
(428 missing values generated)
(428 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00008k not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00008k saved as .dta format
           Appending 2019Q1 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 1,572,674 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2019Q1 data to ./data/processed/combined/airline_data.csv
--------------------------------- Processing 2019 Q2 --------------------------------------
(encoding automatically selected: ISO-8859-1)
(15 vars, 7,465,479 obs)
(153,863 observations deleted)
(426,086 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00008m saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       223,652
        from master                   223,652  
        from using                          0  

    Matched                         6,661,878  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       224,488
        from master                   224,488  
        from using                          0  

    Matched                         6,661,042  
    -----------------------------------------
(1,032,767 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         5,852,763  
    -----------------------------------------
(0 real changes made)
(5,852,763 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         5,852,763  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 5,180,577    333,405 | 5,513,982 
         1 |   331,692      7,089 |   338,781 
-----------+----------------------+----------
     Total | 5,512,269    340,494 | 5,852,763 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         5,852,763  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        46,250
        from master                    46,250  
        from using                          0  

    Matched                         5,806,513  
    -----------------------------------------
(0 real changes made)
(5,852,763 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        45,774
        from master                    45,774  
        from using                          0  

    Matched                         5,806,989  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        52,001
        from master                    52,001  
        from using                          0  

    Matched                         5,800,762  
    -----------------------------------------
(52,001 real changes made)
(5,852,763 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        52,322
        from master                    52,322  
        from using                          0  

    Matched                         5,800,441  
    -----------------------------------------
(52,322 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 2,590,823  1,415,597 | 4,006,420 
         1 | 1,424,229    422,114 | 1,846,343 
-----------+----------------------+----------
     Total | 4,015,052  1,837,711 | 5,852,763 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(5,824,934 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00008o saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            27,829  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     27,829    .1367909    .3295823          0          1
destinatio~b |     27,829    .1361986    .3289251          0          1
origin_slo~d |     27,829    .0238144    .1287426          0          1
destinatio~d |     27,829    .0231312    .1267205          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 27829
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(15,981 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(11,419 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(12,804 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(5,676 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(7,011 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(1,472 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(471 missing values generated)
(471 missing values generated)
(471 missing values generated)
(471 missing values generated)
(471 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00008p not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00008p saved as .dta format
           Appending 2019Q2 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 1,596,368 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2019Q2 data to ./data/processed/combined/airline_data.csv
--------------------------------- Processing 2019 Q3 --------------------------------------
(encoding automatically selected: ISO-8859-1)
(15 vars, 7,141,323 obs)
(134,094 observations deleted)
(419,716 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00008r saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       224,779
        from master                   224,779  
        from using                          0  

    Matched                         6,362,734  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       219,807
        from master                   219,807  
        from using                          0  

    Matched                         6,367,706  
    -----------------------------------------
(1,058,226 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         5,529,287  
    -----------------------------------------
(0 real changes made)
(5,529,287 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         5,529,287  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 4,902,514    309,864 | 5,212,378 
         1 |   311,377      5,532 |   316,909 
-----------+----------------------+----------
     Total | 5,213,891    315,396 | 5,529,287 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         5,529,287  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        44,318
        from master                    44,318  
        from using                          0  

    Matched                         5,484,969  
    -----------------------------------------
(0 real changes made)
(5,529,287 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        43,085
        from master                    43,085  
        from using                          0  

    Matched                         5,486,202  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        48,340
        from master                    48,340  
        from using                          0  

    Matched                         5,480,947  
    -----------------------------------------
(48,340 real changes made)
(5,529,287 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        47,966
        from master                    47,966  
        from using                          0  

    Matched                         5,481,321  
    -----------------------------------------
(47,966 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 2,436,713  1,342,792 | 3,779,505 
         1 | 1,358,898    390,884 | 1,749,782 
-----------+----------------------+----------
     Total | 3,795,611  1,733,676 | 5,529,287 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(5,501,411 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00008t saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            27,876  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     27,876    .1379679    .3307201          0          1
destinatio~b |     27,876     .137599    .3304279          0          1
origin_slo~d |     27,876    .0234321    .1275326          0          1
destinatio~d |     27,876    .0229814    .1261349          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 27876
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(16,057 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(11,391 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(12,933 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(5,682 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(6,985 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(1,435 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(428 missing values generated)
(428 missing values generated)
(428 missing values generated)
(428 missing values generated)
(428 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00008u not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00008u saved as .dta format
           Appending 2019Q3 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 1,623,726 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2019Q3 data to ./data/processed/combined/airline_data.csv
--------------------------------- Processing 2019 Q4 --------------------------------------
(encoding automatically selected: ISO-8859-1)
(15 vars, 7,420,339 obs)
(121,255 observations deleted)
(429,693 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.00008w saved as .dta format
    ---------  Filtering CONUS airports ---------
(variable originairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       207,421
        from master                   207,421  
        from using                          0  

    Matched                         6,661,970  
    -----------------------------------------
(variable destairportid was int, now long to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                       210,311
        from master                   210,311  
        from using                          0  

    Matched                         6,659,080  
    -----------------------------------------
(1,045,706 observations deleted)
    ---------  Filtering slot-controlled airports ---------
(variable airport_id was float, now double to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         5,823,685  
    -----------------------------------------
(0 real changes made)
(5,823,685 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         5,823,685  
    -----------------------------------------
(0 real changes made)

origin_slo | destination_slot_cont
t_controll |        rolled
        ed |         0          1 |     Total
-----------+----------------------+----------
         0 | 5,143,623    335,260 | 5,478,883 
         1 |   338,311      6,491 |   344,802 
-----------+----------------------+----------
     Total | 5,481,934    341,751 | 5,823,685 
    ---------  Merging destination vacation flags ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                         5,823,685  
    -----------------------------------------
(0 real changes made)
    ---------  Merging airport populations ---------

    Result                      Number of obs
    -----------------------------------------
    Not matched                        46,360
        from master                    46,360  
        from using                          0  

    Matched                         5,777,325  
    -----------------------------------------
(0 real changes made)
(5,823,685 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        47,622
        from master                    47,622  
        from using                          0  

    Matched                         5,776,063  
    -----------------------------------------
(0 real changes made)
    ---------  Merging hub indicators ---------
(variable airport_id was float, now double to accommodate using data's values)
(variable carrier was str2, now str4 to accommodate using data's values)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        48,477
        from master                    48,477  
        from using                          0  

    Matched                         5,775,208  
    -----------------------------------------
(48,477 real changes made)
(5,823,685 real changes made)

    Result                      Number of obs
    -----------------------------------------
    Not matched                        49,010
        from master                    49,010  
        from using                          0  

    Matched                         5,774,675  
    -----------------------------------------
(49,010 real changes made)

           |    destination_hub
origin_hub |         0          1 |     Total
-----------+----------------------+----------
         0 | 2,510,961  1,441,628 | 3,952,589 
         1 | 1,451,937    419,159 | 1,871,096 
-----------+----------------------+----------
     Total | 3,962,898  1,860,787 | 5,823,685 
    ---------  Aggregating to (O-D-carrier-quarter) ---------

Duplicates in terms of origin destination carrier year quarter

(5,796,543 observations deleted)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000090 saved as .dta format

    Result                      Number of obs
    -----------------------------------------
    Not matched                             0
    Matched                            27,142  
    -----------------------------------------

    Variable |        Obs        Mean    Std. dev.       Min        Max
-------------+---------------------------------------------------------
  origin_hub |     27,142    .1363586    .3293684          0          1
destinatio~b |     27,142    .1366389    .3297461          0          1
origin_slo~d |     27,142    .0230896    .1271146          0          1
destinatio~d |     27,142    .0228166    .1265338          0          1
               Data collapsed to (O-D-carrier-quarter) level successfully, obs: 27142
    ---------  Creating identifiers ---------
origin_str generated as str5
dest_str generated as str5
year_str generated as str4
quarter_str generated as str1
    ---------  Creating carrier flags ---------

. // -----------------------------------------------------------------------------
. // * File:    processing_data.do
. // * Purpose: Contains logit to create major carrier flags
. // *          and carrier type classifications
. // -----------------------------------------------------------------------------
. 
. gen major = 0

. 
. // Use inlist()  does not allowed more than 10 itemrms
. replace major = 1 if year==2019 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","F9","HA")
(15,516 real changes made)

. replace major = 1 if year==2019 & inlist(carrier,"B6","RC","OO","WN","NK","UA")
(11,202 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"AS","G4","AA","5Y","DL","MQ","EV","F9")
(0 real changes made)

. replace major = 1 if year==2018 & inlist(carrier,"HA","B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"AS","G4","AA","5Y","DL","F9","HA","B6")
(0 real changes made)

. replace major = 1 if year==2017 & inlist(carrier,"OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2016 & inlist(carrier,"B6","OO","WN","NK","UA","VX")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2015 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"AS","AA","5Y","DL","MQ","EV","F9","HA")
(0 real changes made)

. replace major = 1 if year==2014 & inlist(carrier,"B6","OO","WN","NK","UA","US","VX")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","EV","F9")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"HA","B6","K4","OO","WN","NK","UA","US")
(0 real changes made)

. replace major = 1 if year==2013 & inlist(carrier,"VX","WO")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"8C","AS","AA","MQ","5Y","DL","F9","HA")
(0 real changes made)

. replace major = 1 if year==2012 & inlist(carrier,"B6","K4","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"8C","AS","AA","MQ","5Y","CO","CS","DL")
(0 real changes made)

. replace major = 1 if year==2011 & inlist(carrier,"F9","HA","B6","OO","WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"CO","DO","F9","HA","B6","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2010 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"CO","DL","F9","HA","B6","YV","NW","OO")
(0 real changes made)

. replace major = 1 if year==2009 & inlist(carrier,"WN","UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"GB","8C","AS","AA","MQ","EV","5Y","OH")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2008 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"GB","8C","AS","AA","MQ","HP","EV","OH")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"CO","DL","F9","B6","YV","NW","OO","WN")
(0 real changes made)

. replace major = 1 if year==2007 & inlist(carrier,"UA","US","WO")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"GB","8C","AS","AA","MQ","TZ","HP","EV")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"OH","CO","DL","B6","NW","OO","WN","UA")
(0 real changes made)

. replace major = 1 if year==2006 & inlist(carrier,"US","WO")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"AS","AA","MQ","TZ","HP","OH","CO","EV")
(0 real changes made)

. replace major = 1 if year==2005 & inlist(carrier,"DL","B6","NW","WN","UA","US","WO")
(0 real changes made)

. 
. // Create carrier type classifications
. gen legacy = 0

. gen lcc = 0

. 
. // Legacy carriers (traditional full-service carriers)
. replace legacy = 1 if inlist(carrier,"AS","AQ","AA","CO","DL")
(12,437 real changes made)

. replace legacy = 1 if inlist(carrier,"HA","NW","TW","UA","US")
(5,479 real changes made)

. 
. // Low-cost carriers
. replace lcc = 1 if inlist(carrier,"TZ","F9","YV","DH","B6","YX","SX","XP","WN")
(7,002 real changes made)

. replace lcc = 1 if inlist(carrier,"NK","SY","U5","VC")
(1,478 real changes made)

. 
. 
. di as text "    Major carrier flags and carrier type classifications created successfully."
    Major carrier flags and carrier type classifications created successfully.

. 
end of do-file
    ---------  Creating rival stats ---------
(0 real changes made)
(449 missing values generated)
(449 missing values generated)
(449 missing values generated)
(449 missing values generated)
(449 observations deleted)
    ---------  Writing data to output file ---------
(file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000091 not found)
file /var/folders/xb/mch0wfzd205d97392nxjwj240000gn/T//S_60238.000091 saved as .dta format
           Appending 2019Q4 data to existing file...
(encoding automatically selected: ISO-8859-1)
(38 vars, 1,651,174 obs)
(variable carrier was str2, now str4 to accommodate using data's values)
(variable total_passengers was long, now double to accommodate using data's values)
(variable destination_vacation was byte, now float to accommodate using data's values)
(variable origin_pop was long, now double to accommodate using data's values)
(variable dest_pop was long, now double to accommodate using data's values)
(variable average_distance was float, now double to accommodate using data's values)
(variable average_nonstop_miles was float, now double to accommodate using data's values)
(variable average_fare was float, now double to accommodate using data's values)
(variable average_extra_miles was float, now double to accommodate using data's values)
(variable time was str6, now str25 to accommodate using data's values)
(variable major was byte, now float to accommodate using data's values)
(variable legacy was byte, now float to accommodate using data's values)
(variable lcc was byte, now float to accommodate using data's values)
(variable fringe was byte, now float to accommodate using data's values)
(variable fringe_carriers was byte, now float to accommodate using data's values)
(variable num_destinations was int, now float to accommodate using data's values)
(variable num_markets was int, now float to accommodate using data's values)
(variable total_presence was float, now double to accommodate using data's values)
(variable total_num_markets was long, now double to accommodate using data's values)
(variable total_num_destinations was int, now double to accommodate using data's values)
(variable average_presence_rival was float, now double to accommodate using data's values)
(variable average_num_markets_rival was float, now double to accommodate using data's values)
(variable average_num_destinations_rival was float, now double to accommodate using data's values)
(variable average_distance_rival was float, now double to accommodate using data's values)
(variable rival_carriers was byte, now int to accommodate using data's values)
file ./data/processed/combined/airline_data.csv saved
           Successfully wrote 2019Q4 data to ./data/processed/combined/airline_data.csv

. 
. di as result "Done. Wrote: ${OUT_FILE}"
Done. Wrote: ./data/processed/combined/airline_data.csv

. 
. log close
      name:  <unnamed>
       log:  /Users/gisellelab/Work/airlines_merger_simulation/src/logs/processing_data.log
  log type:  text
 closed on:   8 Oct 2025, 02:11:48
----------------------------------------------------------------------------------------------------------------------------
